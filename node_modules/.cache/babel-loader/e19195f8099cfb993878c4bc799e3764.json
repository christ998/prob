{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Christian\\\\Desktop\\\\tele\\\\Nueva carpeta\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Christian\\\\Desktop\\\\tele\\\\Nueva carpeta\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\Christian\\\\Desktop\\\\tele\\\\Nueva carpeta\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from'react';import{Html}from\"@react-three/drei\";import{useThree}from\"react-three-fiber\";import{Button,ButtonGroup,Card,CardBody,CardImg,CardTitle,CardText,CardFooter,Row,Col,CardImgOverlay,Table,Modal,ModalHeader,ModalBody,ModalFooter}from\"reactstrap\";import{useGLTF}from'@react-three/drei/useGLTF';import{getList}from'helpers/ListHelper';var Tag=function Tag(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),hovered=_useState2[0],setHover=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),active=_useState4[0],setActive=_useState4[1];var _useGLTF=useGLTF('/mesh/lesiones.gltf'),nodes=_useGLTF.nodes,materials=_useGLTF.materials;var htmlref=useRef();var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),modalDelete=_useState6[0],setModalDelete=_useState6[1];var toggleDelete=function toggleDelete(){return setModalDelete(!modalDelete);};var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),formData=_useState8[0],setFormData=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),colorData=_useState10[0],setColorData=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),surfaceData=_useState12[0],setSurfaceData=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),consistencyData=_useState14[0],setConsistencyData=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),evolutionFormData=_useState16[0],setEvolutionFormData=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),symptomatologyData=_useState18[0],setSymptomatologyData=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),edgeData=_useState20[0],setEdgeData=_useState20[1];var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),localizationData=_useState22[0],setLocalizationData=_useState22[1];var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(set,route){var e;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getList(route);case 2:e=_context.sent;set(e);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getData(_x,_x2){return _ref.apply(this,arguments);};}();var _useState23=useState(),_useState24=_slicedToArray(_useState23,2),form=_useState24[0],setForm=_useState24[1];var _useState25=useState(),_useState26=_slicedToArray(_useState25,2),color=_useState26[0],setColor=_useState26[1];var _useState27=useState(),_useState28=_slicedToArray(_useState27,2),surface=_useState28[0],setSurface=_useState28[1];var _useState29=useState(),_useState30=_slicedToArray(_useState29,2),consistency=_useState30[0],setConsistency=_useState30[1];var _useState31=useState(),_useState32=_slicedToArray(_useState31,2),evolutionForm=_useState32[0],setEvolutionForm=_useState32[1];var _useState33=useState(),_useState34=_slicedToArray(_useState33,2),symptomatology=_useState34[0],setSymptomatology=_useState34[1];var _useState35=useState(),_useState36=_slicedToArray(_useState35,2),edge=_useState36[0],setEdge=_useState36[1];var _useState37=useState(),_useState38=_slicedToArray(_useState37,2),localization=_useState38[0],setLocalization=_useState38[1];var position=[props.marker.position_x,props.marker.position_y,props.marker.position_z];var orientation=[props.marker.orientation_x,props.marker.orientation_y,props.marker.orientation_z,\"XYZ\"];var styleTd={whiteSpace:'normal',paddingRight:\"0.5rem\",paddingLeft:\"0.5rem\",textAlign:'justify',textJustify:'inter-word',maxWidth:'50%'};var styleTh={paddingRight:\"0.5rem\",paddingLeft:\"0.5rem\",textAlign:'justify',textJustify:'inter-word',maxWidth:'50%'};var getTranslate3d=function getTranslate3d(element){var values=element.style.transform.split(/\\w+\\(|\\);?/);if(!values[1]||!values[1].length){return[];}console.log(values[1].split(/,\\s?/g));return values[1].split(/,\\s?/g);};var handleClick=function handleClick(e){if(props.adding===2){setActive(!active);active?console.log(getTranslate3d(htmlref.current.offsetParent)):getTranslate3d(htmlref.current.offsetParent);}setForm(formData.find(function(x){return x.form_id==props.marker.form;}).name);setColor(colorData.find(function(x){return x.color_id==props.marker.color;}).value);setSurface(surfaceData.find(function(x){return x.surface_id==props.marker.surface;}).value);setConsistency(consistencyData.find(function(x){return x.consistency_id==props.marker.consistency;}).name);setEvolutionForm(evolutionFormData.find(function(x){return x.evolution_form_id==props.marker.evolution_form;}).value);setSymptomatology(symptomatologyData.find(function(x){return x.symptomatology_id==props.marker.symptomatology;}).value);setEdge(edgeData.find(function(x){return x.edge_id==props.marker.edge;}).name);setLocalization(localizationData.find(function(x){return x.localization_id==props.marker.localization;}).value);};useEffect(function(){var canvas=document.getElementsByClassName('canvas')[0];var htmlDrei=document.getElementsByClassName('html-drei')[0];getData(setFormData,\"list/forms\");getData(setColorData,\"list/colors\");getData(setSurfaceData,\"list/surfaces\");getData(setConsistencyData,\"list/consistencies\");getData(setEvolutionFormData,\"list/evolution-forms\");getData(setSymptomatologyData,\"list/symptomatologies\");getData(setEdgeData,\"list/edges\");getData(setLocalizationData,\"list/localizations\");},[]);return/*#__PURE__*/React.createElement(\"mesh\",Object.assign({},props,{material:materials.fibroma_traumatico,geometry:nodes.fibroma_traumatico.geometry,scale:[props.marker.length*0.001,props.marker.width*0.003,props.marker.height*0.003]/* scale={active ? [0.04, 0.04, 0.04] : [0.03, 0.03, 0.03]} */,onClick:function onClick(e){return handleClick(e);},onPointerOver:function onPointerOver(){return setHover(true);},onPointerOut:function onPointerOut(){return setHover(false);},position:position,rotation:orientation,name:\"marker\"}),/*#__PURE__*/React.createElement(Html,{ref:htmlref,className:\"html-drei\",style:{transform:'translate3d(15%,-50%, 0)'},zIndexRange:[90,0]},/*#__PURE__*/React.createElement(Card,{style:{display:active?'block':'none',width:\"21rem\",wordWrap:'inherit'}},/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){setActive(!active);},className:\"close\",color:\"primary\",size:\"lg\",style:{zIndex:100,position:'absolute',right:\"0px\",top:\"0.4rem\"}},/*#__PURE__*/React.createElement(\"span\",{\"aria-hidden\":\"true\"},\"\\xD7\")),/*#__PURE__*/React.createElement(ButtonGroup,{size:\"lg\",style:{zIndex:100,position:'absolute',left:\"0px\",top:\"0px\"}},/*#__PURE__*/React.createElement(Button,{color:\"primary\",size:\"lg\",onClick:function onClick(){props.editMarker(props.marker);}},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-pencil-alt\"})),/*#__PURE__*/React.createElement(Button,{color:\"danger\",size:\"sm\",onClick:toggleDelete},/*#__PURE__*/React.createElement(\"i\",{className:\"far fa-trash-alt\"}))),/*#__PURE__*/React.createElement(CardImgOverlay,{onClick:function onClick(){console.log('abrir imagen');}}),/*#__PURE__*/React.createElement(CardImg,{alt:\"...\",src:require(\"assets/img/image-placeholder.png\"),top:true}),/*#__PURE__*/React.createElement(CardBody,{style:{padding:\"5px\"}},/*#__PURE__*/React.createElement(Table,{className:\"table table-sm\"},/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{style:styleTh,scope:\"row\"},\"Forma:\"),/*#__PURE__*/React.createElement(\"td\",{style:styleTd},form)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{style:styleTh,scope:\"row\"},\"Tama\\xF1o:\"),/*#__PURE__*/React.createElement(\"td\",{style:styleTd},props.marker.length,\" x \",props.marker.width,\" x \",props.marker.height,\" mm\")),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{style:styleTh,scope:\"row\"},\"Color:\"),/*#__PURE__*/React.createElement(\"td\",{style:styleTd},color)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{style:styleTh,scope:\"row\"},\"Superficie:\"),/*#__PURE__*/React.createElement(\"td\",{style:styleTd},surface)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{style:styleTh,scope:\"row\"},\"Consistencia:\"),/*#__PURE__*/React.createElement(\"td\",{style:styleTd},consistency)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{style:styleTh,scope:\"row\"},\"Tiempo de evoluci\\xF3n:\"),/*#__PURE__*/React.createElement(\"td\",{style:styleTd},props.marker.evolution_time)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{style:styleTh,scope:\"row\"},\"Forma de evoluci\\xF3n:\"),/*#__PURE__*/React.createElement(\"td\",{style:styleTd},evolutionForm)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{style:styleTh,scope:\"row\"},\"Sintomatolog\\xEDa:\"),/*#__PURE__*/React.createElement(\"td\",{style:styleTd},symptomatology)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{style:styleTh,scope:\"row\"},\"Bordes:\"),/*#__PURE__*/React.createElement(\"td\",{style:styleTd},edge)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{style:styleTh,scope:\"row\"},\"Localizaci\\xF3n:\"),/*#__PURE__*/React.createElement(\"td\",{style:styleTd},localization)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{style:styleTh,scope:\"row\"},\"Observaciones:\"),/*#__PURE__*/React.createElement(\"td\",{style:styleTd},props.marker.observation)))))),/*#__PURE__*/React.createElement(Modal,{isOpen:modalDelete,toggle:toggleDelete},/*#__PURE__*/React.createElement(ModalHeader,{toggle:toggleDelete},\"Eliminar\"),/*#__PURE__*/React.createElement(ModalBody,null,\"\\xBFSeguro que desea eliminar el marcador?\"),/*#__PURE__*/React.createElement(ModalFooter,null,/*#__PURE__*/React.createElement(Button,{color:\"danger\",onClick:function onClick(){props.deleteMarker(props.marker.id);}},\"Eliminar marcador\"),' ',/*#__PURE__*/React.createElement(Button,{color:\"secundary\",onClick:toggleDelete},\"Cancelar\")))));};export default Tag;useGLTF.preload('/mesh/lesiones.gltf');","map":{"version":3,"sources":["C:/Users/Christian/Desktop/tele/Nueva carpeta/src/components/Fantoma/Tag/Tag.jsx"],"names":["React","useState","useEffect","useRef","Html","useThree","Button","ButtonGroup","Card","CardBody","CardImg","CardTitle","CardText","CardFooter","Row","Col","CardImgOverlay","Table","Modal","ModalHeader","ModalBody","ModalFooter","useGLTF","getList","Tag","props","hovered","setHover","active","setActive","nodes","materials","htmlref","modalDelete","setModalDelete","toggleDelete","formData","setFormData","colorData","setColorData","surfaceData","setSurfaceData","consistencyData","setConsistencyData","evolutionFormData","setEvolutionFormData","symptomatologyData","setSymptomatologyData","edgeData","setEdgeData","localizationData","setLocalizationData","getData","set","route","e","form","setForm","color","setColor","surface","setSurface","consistency","setConsistency","evolutionForm","setEvolutionForm","symptomatology","setSymptomatology","edge","setEdge","localization","setLocalization","position","marker","position_x","position_y","position_z","orientation","orientation_x","orientation_y","orientation_z","styleTd","whiteSpace","paddingRight","paddingLeft","textAlign","textJustify","maxWidth","styleTh","getTranslate3d","element","values","style","transform","split","length","console","log","handleClick","adding","current","offsetParent","find","x","form_id","name","color_id","value","surface_id","consistency_id","evolution_form_id","evolution_form","symptomatology_id","edge_id","localization_id","canvas","document","getElementsByClassName","htmlDrei","fibroma_traumatico","geometry","width","height","display","wordWrap","zIndex","right","top","left","editMarker","require","padding","evolution_time","observation","deleteMarker","id","preload"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef} from 'react'\r\nimport { Html } from \"@react-three/drei\";\r\nimport { useThree } from \"react-three-fiber\";\r\nimport {\r\n    Button,\r\n    ButtonGroup,\r\n    Card,\r\n    CardBody,\r\n    CardImg,\r\n    CardTitle,\r\n    CardText,\r\n    CardFooter,\r\n    Row,\r\n    Col,\r\n    CardImgOverlay, \r\n    Table,\r\n    Modal,\r\n    ModalHeader,\r\n    ModalBody,\r\n    ModalFooter\r\n} from \"reactstrap\";\r\nimport { useGLTF } from '@react-three/drei/useGLTF'\r\nimport { getList } from 'helpers/ListHelper';\r\n\r\n\r\nconst Tag = (props) => {\r\n    \r\n    const [hovered, setHover] = useState(false)\r\n    const [active, setActive] = useState(false) \r\n    const { nodes, materials } = useGLTF('/mesh/lesiones.gltf')\r\n    const htmlref = useRef()\r\n\r\n\r\n    const [modalDelete, setModalDelete] = useState(false);\r\n    const toggleDelete = () => setModalDelete(!modalDelete);\r\n\r\n    const [formData, setFormData] = useState([]);\r\n    const [colorData, setColorData] = useState([]);\r\n    const [surfaceData, setSurfaceData] = useState([]);\r\n    const [consistencyData, setConsistencyData] = useState([]);\r\n    const [evolutionFormData, setEvolutionFormData] =useState([]);\r\n    const [symptomatologyData, setSymptomatologyData] = useState([]);\r\n    const [edgeData, setEdgeData] = useState([]);\r\n    const [localizationData, setLocalizationData] = useState([]);\r\n\r\n    const getData = async (set, route) => {\r\n        const e = await getList(route)\r\n        set(e)\r\n    }\r\n\r\n    const [form, setForm] = useState()\r\n    const [color, setColor] = useState()\r\n    const [surface, setSurface] = useState()\r\n    const [consistency, setConsistency] = useState()\r\n    const [evolutionForm, setEvolutionForm] = useState()\r\n    const [symptomatology, setSymptomatology] = useState()\r\n    const [edge, setEdge] = useState()\r\n    const [localization, setLocalization] = useState()\r\n\r\n\r\n    const position=[props.marker.position_x, props.marker.position_y, props.marker.position_z]\r\n    const orientation=[props.marker.orientation_x, props.marker.orientation_y, props.marker.orientation_z, \"XYZ\"]\r\n\r\n    const styleTd={\r\n        whiteSpace: 'normal' , \r\n        paddingRight: \"0.5rem\",\r\n        paddingLeft: \"0.5rem\",\r\n        textAlign: 'justify',\r\n        textJustify: 'inter-word',\r\n        maxWidth: '50%',\r\n    }\r\n    const styleTh={\r\n        paddingRight: \"0.5rem\",\r\n        paddingLeft: \"0.5rem\",\r\n        textAlign: 'justify',\r\n        textJustify: 'inter-word',\r\n        maxWidth: '50%',\r\n    }\r\n    \r\n    const getTranslate3d = (element) =>  {\r\n        const values = element.style.transform.split(/\\w+\\(|\\);?/);\r\n        if (!values[1] || !values[1].length) {\r\n            return [];\r\n        }\r\n        console.log(values[1].split(/,\\s?/g))\r\n        return values[1].split(/,\\s?/g);\r\n        \r\n    }\r\n\r\n    const handleClick = (e) => {\r\n        if(props.adding=== 2){\r\n        setActive(!active)\r\n        active ? console.log(getTranslate3d(htmlref.current.offsetParent)): getTranslate3d(htmlref.current.offsetParent)}\r\n\r\n        setForm(formData.find(x => x.form_id == props.marker.form).name)\r\n        setColor(colorData.find(x => x.color_id == props.marker.color).value)\r\n        setSurface(surfaceData.find(x => x.surface_id == props.marker.surface).value)\r\n        setConsistency(consistencyData.find(x => x.consistency_id == props.marker.consistency).name)\r\n        setEvolutionForm(evolutionFormData.find(x => x.evolution_form_id == props.marker.evolution_form).value)\r\n        setSymptomatology(symptomatologyData.find(x => x.symptomatology_id == props.marker.symptomatology).value)\r\n        setEdge(edgeData.find(x => x.edge_id == props.marker.edge).name)\r\n        setLocalization(localizationData.find(x => x.localization_id == props.marker.localization).value)\r\n\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        const canvas= document.getElementsByClassName('canvas')[0];\r\n        const htmlDrei= document.getElementsByClassName('html-drei')[0];\r\n        getData(setFormData, \"list/forms\")\r\n        getData(setColorData, \"list/colors\")\r\n        getData(setSurfaceData, \"list/surfaces\")\r\n        getData(setConsistencyData, \"list/consistencies\")\r\n        getData(setEvolutionFormData, \"list/evolution-forms\")\r\n        getData(setSymptomatologyData, \"list/symptomatologies\")\r\n        getData(setEdgeData, \"list/edges\")\r\n        getData(setLocalizationData, \"list/localizations\")\r\n        \r\n\t}, []);\r\n\r\n\r\n    \r\n    return (\r\n        \r\n        <mesh\r\n           {...props}\r\n           material={materials.fibroma_traumatico}\r\n           geometry={nodes.fibroma_traumatico.geometry}\r\n           scale={[props.marker.length*0.001,props.marker.width*0.003, props.marker.height*0.003]}\r\n           /* scale={active ? [0.04, 0.04, 0.04] : [0.03, 0.03, 0.03]} */\r\n           onClick={(e) => handleClick(e)}\r\n           onPointerOver={() => setHover(true)}\r\n           onPointerOut={() => setHover(false)}\r\n           position={position}\r\n           rotation={orientation}\r\n           name='marker'\r\n           >\r\n              {/*  <sphereBufferGeometry  args={[0.5, 32, 32]} />\r\n               <meshStandardMaterial color={hovered ? 'yellow' : 'lime'} emissive=\"blue\" roughness=\"0\" /> */}\r\n               <Html ref={htmlref} className='html-drei' style={{transform: 'translate3d(15%,-50%, 0)'}} zIndexRange={[90, 0]} >\r\n                   <Card style={{display: active ? 'block' : 'none', width: \"21rem\", wordWrap: 'inherit'}}>\r\n                            <Button  onClick={() => {setActive(!active)}} className=\"close\"color=\"primary\" size=\"lg\" style={{ zIndex: 100, position: 'absolute', right: \"0px\", top: \"0.4rem\" }}><span aria-hidden=\"true\">&times;</span></Button>\r\n                        <ButtonGroup  size=\"lg\" style={{ zIndex: 100, position: 'absolute', left: \"0px\", top: \"0px\" }}>\r\n                           <Button  color=\"primary\" size=\"lg\" onClick={() => {props.editMarker(props.marker)}}><i className=\"fas fa-pencil-alt\"></i></Button>\r\n                           <Button color=\"danger\" size=\"sm\" onClick={toggleDelete}><i className=\"far fa-trash-alt\"></i></Button>\r\n                       </ButtonGroup>\r\n                       <CardImgOverlay onClick={() =>{console.log('abrir imagen')}}>\r\n                           {/* <CardTitle className=\"text-white\">Fibroma traumático</CardTitle> */}\r\n                       </CardImgOverlay>\r\n                       <CardImg\r\n                           alt=\"...\"\r\n                           src={require(\"assets/img/image-placeholder.png\")}\r\n                           top\r\n                       />   \r\n                       <CardBody style={{padding: \"5px\"}}>\r\n                                <Table className=\"table table-sm\" >\r\n                                    <tbody>\r\n                                        <tr>\r\n                                            <th style={styleTh} scope=\"row\">Forma:</th>\r\n                                            <td style={styleTd}>{form}</td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            <th style={styleTh} scope=\"row\">Tamaño:</th>\r\n                                            <td style={styleTd}>{props.marker.length} x {props.marker.width} x {props.marker.height} mm</td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            <th style={styleTh} scope=\"row\">Color:</th>\r\n                                            <td style={styleTd}>{color}</td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            <th style={styleTh} scope=\"row\">Superficie:</th>\r\n                                            <td style={styleTd}>{surface}</td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            <th style={styleTh} scope=\"row\">Consistencia:</th>\r\n                                            <td style={styleTd}>{consistency}</td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            <th style={styleTh} scope=\"row\">Tiempo de evolución:</th>\r\n                                            <td style={styleTd}>{props.marker.evolution_time}</td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            <th style={styleTh} scope=\"row\">Forma de evolución:</th>\r\n                                            <td style={styleTd}>{evolutionForm}</td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            <th style={styleTh} scope=\"row\">Sintomatología:</th>\r\n                                            <td style={styleTd}>{symptomatology}</td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            <th style={styleTh} scope=\"row\">Bordes:</th>\r\n                                            <td style={styleTd}>{edge}</td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            <th style={styleTh} scope=\"row\">Localización:</th>\r\n                                            <td style={styleTd}>{localization}</td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            <th style={styleTh} scope=\"row\">Observaciones:</th>\r\n                                            <td style={styleTd}>{props.marker.observation}</td>\r\n                                        </tr>                 \r\n                                    </tbody>\r\n                                </Table>\r\n                       </CardBody>\r\n                   </Card>\r\n                   <Modal isOpen={modalDelete} toggle={toggleDelete}>\r\n                        <ModalHeader toggle={toggleDelete} >Eliminar</ModalHeader>\r\n                        <ModalBody>¿Seguro que desea eliminar el marcador?</ModalBody>\r\n                        <ModalFooter>\r\n                            <Button color=\"danger\" onClick={() => {props.deleteMarker(props.marker.id)}}>Eliminar marcador</Button>{' '}\r\n                            <Button color=\"secundary\" onClick={toggleDelete}>Cancelar</Button>\r\n                        </ModalFooter>\r\n                    </Modal>\r\n               </Html>   \r\n           </mesh >\r\n         \r\n        )\r\n}\r\nexport default Tag\r\n\r\nuseGLTF.preload('/mesh/lesiones.gltf')"]},"metadata":{},"sourceType":"module"}