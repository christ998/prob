{"ast":null,"code":"module.exports = function (_list) {\n  var item, text, columns, searchString, customSearch;\n  var prepare = {\n    resetList: function resetList() {\n      _list.i = 1;\n\n      _list.templater.clear();\n\n      customSearch = undefined;\n    },\n    setOptions: function setOptions(args) {\n      if (args.length == 2 && args[1] instanceof Array) {\n        columns = args[1];\n      } else if (args.length == 2 && typeof args[1] == \"function\") {\n        columns = undefined;\n        customSearch = args[1];\n      } else if (args.length == 3) {\n        columns = args[1];\n        customSearch = args[2];\n      } else {\n        columns = undefined;\n      }\n    },\n    setColumns: function setColumns() {\n      if (_list.items.length === 0) return;\n\n      if (columns === undefined) {\n        columns = _list.searchColumns === undefined ? prepare.toArray(_list.items[0].values()) : _list.searchColumns;\n      }\n    },\n    setSearchString: function setSearchString(s) {\n      s = _list.utils.toString(s).toLowerCase();\n      s = s.replace(/[-[\\]{}()*+?.,\\\\^$|#]/g, \"\\\\$&\"); // Escape regular expression characters\n\n      searchString = s;\n    },\n    toArray: function toArray(values) {\n      var tmpColumn = [];\n\n      for (var name in values) {\n        tmpColumn.push(name);\n      }\n\n      return tmpColumn;\n    }\n  };\n  var search = {\n    list: function list() {\n      for (var k = 0, kl = _list.items.length; k < kl; k++) {\n        search.item(_list.items[k]);\n      }\n    },\n    item: function item(_item) {\n      _item.found = false;\n\n      for (var j = 0, jl = columns.length; j < jl; j++) {\n        if (search.values(_item.values(), columns[j])) {\n          _item.found = true;\n          return;\n        }\n      }\n    },\n    values: function values(_values, column) {\n      if (_values.hasOwnProperty(column)) {\n        text = _list.utils.toString(_values[column]).toLowerCase();\n\n        if (searchString !== \"\" && text.search(searchString) > -1) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n    reset: function reset() {\n      _list.reset.search();\n\n      _list.searched = false;\n    }\n  };\n\n  var searchMethod = function searchMethod(str) {\n    _list.trigger('searchStart');\n\n    prepare.resetList();\n    prepare.setSearchString(str);\n    prepare.setOptions(arguments); // str, cols|searchFunction, searchFunction\n\n    prepare.setColumns();\n\n    if (searchString === \"\") {\n      search.reset();\n    } else {\n      _list.searched = true;\n\n      if (customSearch) {\n        customSearch(searchString, columns);\n      } else {\n        search.list();\n      }\n    }\n\n    _list.update();\n\n    _list.trigger('searchComplete');\n\n    return _list.visibleItems;\n  };\n\n  _list.handlers.searchStart = _list.handlers.searchStart || [];\n  _list.handlers.searchComplete = _list.handlers.searchComplete || [];\n\n  _list.utils.events.bind(_list.utils.getByClass(_list.listContainer, _list.searchClass), 'keyup', function (e) {\n    var target = e.target || e.srcElement,\n        // IE have srcElement\n    alreadyCleared = target.value === \"\" && !_list.searched;\n\n    if (!alreadyCleared) {\n      // If oninput already have resetted the list, do nothing\n      searchMethod(target.value);\n    }\n  }); // Used to detect click on HTML5 clear button\n\n\n  _list.utils.events.bind(_list.utils.getByClass(_list.listContainer, _list.searchClass), 'input', function (e) {\n    var target = e.target || e.srcElement;\n\n    if (target.value === \"\") {\n      searchMethod('');\n    }\n  });\n\n  return searchMethod;\n};","map":{"version":3,"sources":["C:/Users/Christian/WebstormProjects/teleodontoweb/node_modules/list.js/src/search.js"],"names":["module","exports","list","item","text","columns","searchString","customSearch","prepare","resetList","i","templater","clear","undefined","setOptions","args","length","Array","setColumns","items","searchColumns","toArray","values","setSearchString","s","utils","toString","toLowerCase","replace","tmpColumn","name","push","search","k","kl","found","j","jl","column","hasOwnProperty","reset","searched","searchMethod","str","trigger","arguments","update","visibleItems","handlers","searchStart","searchComplete","events","bind","getByClass","listContainer","searchClass","e","target","srcElement","alreadyCleared","value"],"mappings":"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","sourcesContent":["module.exports = function(list) {\n  var item,\n    text,\n    columns,\n    searchString,\n    customSearch;\n\n  var prepare = {\n    resetList: function() {\n      list.i = 1;\n      list.templater.clear();\n      customSearch = undefined;\n    },\n    setOptions: function(args) {\n      if (args.length == 2 && args[1] instanceof Array) {\n        columns = args[1];\n      } else if (args.length == 2 && typeof(args[1]) == \"function\") {\n        columns = undefined;\n        customSearch = args[1];\n      } else if (args.length == 3) {\n        columns = args[1];\n        customSearch = args[2];\n      } else {\n        columns = undefined;\n      }\n    },\n    setColumns: function() {\n      if (list.items.length === 0) return;\n      if (columns === undefined) {\n        columns = (list.searchColumns === undefined) ? prepare.toArray(list.items[0].values()) : list.searchColumns;\n      }\n    },\n    setSearchString: function(s) {\n      s = list.utils.toString(s).toLowerCase();\n      s = s.replace(/[-[\\]{}()*+?.,\\\\^$|#]/g, \"\\\\$&\"); // Escape regular expression characters\n      searchString = s;\n    },\n    toArray: function(values) {\n      var tmpColumn = [];\n      for (var name in values) {\n        tmpColumn.push(name);\n      }\n      return tmpColumn;\n    }\n  };\n  var search = {\n    list: function() {\n      for (var k = 0, kl = list.items.length; k < kl; k++) {\n        search.item(list.items[k]);\n      }\n    },\n    item: function(item) {\n      item.found = false;\n      for (var j = 0, jl = columns.length; j < jl; j++) {\n        if (search.values(item.values(), columns[j])) {\n          item.found = true;\n          return;\n        }\n      }\n    },\n    values: function(values, column) {\n      if (values.hasOwnProperty(column)) {\n        text = list.utils.toString(values[column]).toLowerCase();\n        if ((searchString !== \"\") && (text.search(searchString) > -1)) {\n          return true;\n        }\n      }\n      return false;\n    },\n    reset: function() {\n      list.reset.search();\n      list.searched = false;\n    }\n  };\n\n  var searchMethod = function(str) {\n    list.trigger('searchStart');\n\n    prepare.resetList();\n    prepare.setSearchString(str);\n    prepare.setOptions(arguments); // str, cols|searchFunction, searchFunction\n    prepare.setColumns();\n\n    if (searchString === \"\" ) {\n      search.reset();\n    } else {\n      list.searched = true;\n      if (customSearch) {\n        customSearch(searchString, columns);\n      } else {\n        search.list();\n      }\n    }\n\n    list.update();\n    list.trigger('searchComplete');\n    return list.visibleItems;\n  };\n\n  list.handlers.searchStart = list.handlers.searchStart || [];\n  list.handlers.searchComplete = list.handlers.searchComplete || [];\n\n  list.utils.events.bind(list.utils.getByClass(list.listContainer, list.searchClass), 'keyup', function(e) {\n    var target = e.target || e.srcElement, // IE have srcElement\n      alreadyCleared = (target.value === \"\" && !list.searched);\n    if (!alreadyCleared) { // If oninput already have resetted the list, do nothing\n      searchMethod(target.value);\n    }\n  });\n\n  // Used to detect click on HTML5 clear button\n  list.utils.events.bind(list.utils.getByClass(list.listContainer, list.searchClass), 'input', function(e) {\n    var target = e.target || e.srcElement;\n    if (target.value === \"\") {\n      searchMethod('');\n    }\n  });\n\n  return searchMethod;\n};\n"]},"metadata":{},"sourceType":"script"}