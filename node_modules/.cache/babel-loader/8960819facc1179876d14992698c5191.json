{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Christian\\\\Desktop\\\\tele\\\\Nueva carpeta\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:\\\\Users\\\\Christian\\\\Desktop\\\\tele\\\\Nueva carpeta\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Christian\\\\Desktop\\\\tele\\\\Nueva carpeta\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\Christian\\\\Desktop\\\\tele\\\\Nueva carpeta\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";// import \"assets/css/custom-style.css\";\nimport{Redirect}from'react-router-dom';import React,{useState,useEffect,useRef}from'react';import{Alert,Button,Col,Container,FormGroup,Input,Card,CardBody,Label,Table,Modal,ModalHeader,ModalBody,InputGroupAddon,InputGroup}from'reactstrap';import{getList}from'helpers/ListHelper';import moment from'moment';import axios from'../../../helpers/axiosConfig';import SimpleModal from\"../components/SimpleModal\";var ConsultationAppointment=function ConsultationAppointment(_ref){var _location$state,_location$state3;var location=_ref.location;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),cleanLocation=_useState2[0],setCleanLocation=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),newAppointment=_useState4[0],setNewAppointment=_useState4[1];var reqTag=/*#__PURE__*/React.createElement(\"span\",{style:{color:\"#DC3545\"}},\"*\");var l_run=\"\";if(location===null||location===void 0?void 0:(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.run){l_run=location.state.run;}var modalRef=useRef();var setSimpleModal=function setSimpleModal(options){modalRef.current.setModal(options);};var _useState5=useState(l_run),_useState6=_slicedToArray(_useState5,2),searchTerm=_useState6[0],setSearchTerm=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),person=_useState8[0],setPerson=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),persons=_useState10[0],setPersons=_useState10[1];var _useState11=useState(true),_useState12=_slicedToArray(_useState11,2),loading=_useState12[0],setLoading=_useState12[1];var fetchPersons=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getList(\"list/person\");case 2:res=_context.sent;setLoading(false);setPersons(res);case 5:case\"end\":return _context.stop();}}},_callee);}));return function fetchPersons(){return _ref2.apply(this,arguments);};}();useEffect(function(){setTimeout(fetchPersons,1000);cambiar();return function(){setCleanLocation(true);};},[]);/*Professionals###########################################################################*/var defaultProfessional={professional_id:0,professional_fullname:\"\"};var _useState13=useState(defaultProfessional),_useState14=_slicedToArray(_useState13,2),professional=_useState14[0],setProfessional=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),professionals=_useState16[0],setProfessionals=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),displayModalProfessionals=_useState18[0],setDisplayModalProfessionals=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),searchTermProfessional=_useState20[0],setSearchTermProfessional=_useState20[1];var showModalProfessionals=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:fetchProfessionals();setDisplayModalProfessionals(!displayModalProfessionals);setSearchTermProfessional(\"\");case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function showModalProfessionals(){return _ref3.apply(this,arguments);};}();var obtener=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(professional){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setProfessional(professional);setDisplayModalProfessionals(!displayModalProfessionals);case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function obtener(_x){return _ref4.apply(this,arguments);};}();var fetchProfessionals=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return getList(\"user/user-professional\");case 2:res=_context4.sent;setProfessionals(res);case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function fetchProfessionals(){return _ref5.apply(this,arguments);};}();/*Professionals###########################################################################*/ /*Appointments###############################################################################*/var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),displayModalAppointments=_useState22[0],setDisplayModalAppointments=_useState22[1];var _useState23=useState([]),_useState24=_slicedToArray(_useState23,2),appointments=_useState24[0],setAppointments=_useState24[1];var showModalAppointments=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(person){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:setPerson(person);fetchAppointments(person.person_id);setDisplayModalAppointments(!displayModalAppointments);case 3:case\"end\":return _context5.stop();}}},_callee5);}));return function showModalAppointments(_x2){return _ref6.apply(this,arguments);};}();var fetchAppointments=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(person_id){var res;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return getList(\"consultation-appointment/\"+person_id);case 2:res=_context6.sent;setAppointments(res);case 4:case\"end\":return _context6.stop();}}},_callee6);}));return function fetchAppointments(_x3){return _ref7.apply(this,arguments);};}();/*Appointments###############################################################################*/ /*Appointment################################################################################*/var defaultAppointment={cons_appo_id:0,cons_appo_date:moment(),cons_appo_time:\"09:00\",professional_id:\"\",cons_appo_place:\"\",cons_appo_description:\"\"};var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),displayModalAppointment=_useState26[0],setDisplayModalAppointment=_useState26[1];var _useState27=useState(defaultAppointment),_useState28=_slicedToArray(_useState27,2),appointment=_useState28[0],setAppointment=_useState28[1];var showModalAppointmentToCreate=function showModalAppointmentToCreate(person){setPerson(person);setAppointment(defaultAppointment);setProfessional(defaultProfessional);setDisplayModalAppointment(!displayModalAppointment);};var showModalAppointmentToUpdate=function showModalAppointmentToUpdate(appointment){setAppointment(appointment);setProfessional({professional_id:appointment.professional_id,professional_fullname:appointment.professional_fullname});setDisplayModalAppointment(!displayModalAppointment);};var handleInputChange=function handleInputChange(e){setAppointment(_objectSpread(_objectSpread({},appointment),{},{[e.target.name]:e.target.value}));};/*Appointment################################################################################*/ /*Crud#######################################################################################*/var disableAppointment=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(id){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return axios.put(\"consultation-appointment/\"+id);case 2:setSimpleModal({});fetchAppointments(person.person_id);case 4:case\"end\":return _context7.stop();}}},_callee7);}));return function disableAppointment(_x4){return _ref8.apply(this,arguments);};}();var updateAppointment=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var res;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;_context8.next=3;return axios.post(\"consultation-appointment/\"+appointment.cons_appo_id,{cons_appo_date:appointment.cons_appo_date,cons_appo_time:appointment.cons_appo_time,professional_id:professional.professional_id,cons_appo_place:appointment.cons_appo_place,cons_appo_description:appointment.cons_appo_description});case 3:res=_context8.sent;if(!res.data.error){setDisplayModalAppointment(!displayModalAppointment);fetchAppointments(person.person_id);}else{console.log('Err: '+res.data.result.code+' '+res.data.result.sqlMessage);};_context8.next=11;break;case 8:_context8.prev=8;_context8.t0=_context8[\"catch\"](0);console.log('Err: '+_context8.t0);case 11:;case 12:case\"end\":return _context8.stop();}}},_callee8,null,[[0,8]]);}));return function updateAppointment(){return _ref9.apply(this,arguments);};}();var saveAppointment=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var res;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.prev=0;_context9.next=3;return axios.post(\"consultation-appointment\",{person_id:person.person_id,cons_appo_date:appointment.cons_appo_date,cons_appo_time:appointment.cons_appo_time,professional_id:professional.professional_id,cons_appo_place:appointment.cons_appo_place,cons_appo_description:appointment.cons_appo_description});case 3:res=_context9.sent;if(!res.data.error){setDisplayModalAppointment(!displayModalAppointment);setNewAppointment(true);//showModalAppointments(person);\n}else{console.log('Err: '+res.data.result.code+' '+res.data.result.sqlMessage);};_context9.next=11;break;case 8:_context9.prev=8;_context9.t0=_context9[\"catch\"](0);console.log('Err: '+_context9.t0);case 11:;case 12:case\"end\":return _context9.stop();}}},_callee9,null,[[0,8]]);}));return function saveAppointment(){return _ref10.apply(this,arguments);};}();/*Crud#######################################################################################*/var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),ingresado=_useState30[0],setIngresado=_useState30[1];var cambiar=function cambiar(){var _location$state2;if(location===null||location===void 0?void 0:(_location$state2=location.state)===null||_location$state2===void 0?void 0:_location$state2.ingresado){setIngresado(!ingresado);}};return/*#__PURE__*/React.createElement(Container,{className:\"mt-3\"},/*#__PURE__*/React.createElement(SimpleModal,{ref:modalRef}),(location===null||location===void 0?void 0:(_location$state3=location.state)===null||_location$state3===void 0?void 0:_location$state3.ingresado)&&/*#__PURE__*/React.createElement(Alert,{color:\"success\",isOpen:ingresado,toggle:function toggle(){setIngresado(false);}},\"Paciente ingresado exitosamente\"),/*#__PURE__*/React.createElement(Alert,{color:\"success\",isOpen:newAppointment,toggle:function toggle(){setNewAppointment(false);}},\"La consulta fue agendada exitosamente\"),/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(\"h1\",null,\"Agendar Consulta\"),/*#__PURE__*/React.createElement(Input,{type:\"text\",placeholder:\"Buscar...\",name:\"look_for\",value:searchTerm,onChange:function onChange(e){return setSearchTerm(e.target.value);}}),/*#__PURE__*/React.createElement(\"br\",null),loading?/*#__PURE__*/React.createElement(\"div\",{className:\"w-100 d-flex justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"loader\"})):/*#__PURE__*/React.createElement(Table,{className:\"align-items-center\",responsive:true},/*#__PURE__*/React.createElement(\"thead\",{className:\"thead-light\"},/*#__PURE__*/React.createElement(\"tr\",{className:\"text-center\"},/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"ID\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Rut\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Nombre\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Apellidos\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"}),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"}))),/*#__PURE__*/React.createElement(\"tbody\",null,persons.filter(function(val){if(searchTerm==\"\"){return val;}else if(val.run.includes(searchTerm)||val.fullname.toLowerCase().includes(searchTerm.toLowerCase())){return val;}}).map(function(e_person){return/*#__PURE__*/React.createElement(\"tr\",{className:\"text-center\",key:e_person.person_id},/*#__PURE__*/React.createElement(\"td\",null,e_person.person_id),/*#__PURE__*/React.createElement(\"td\",null,e_person.run),/*#__PURE__*/React.createElement(\"td\",null,e_person.names),/*#__PURE__*/React.createElement(\"td\",null,e_person.lastnames),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Button,{color:\"primary\",onClick:function onClick(){return showModalAppointmentToCreate(e_person);}},\"Nuevo\")),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return showModalAppointments(e_person);}},\"Listado\")));}))))),/*#__PURE__*/React.createElement(Modal,{isOpen:displayModalAppointment},/*#__PURE__*/React.createElement(ModalHeader,{toggle:function toggle(){setDisplayModalAppointment(!displayModalAppointment);}},\"Agenda\"),/*#__PURE__*/React.createElement(ModalBody,{className:\"pt-2\"},/*#__PURE__*/React.createElement(FormGroup,{className:\"row\"},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,{className:\"form-control-label\"},\"Fecha \",reqTag),/*#__PURE__*/React.createElement(Input,{value:moment(appointment.cons_appo_date).format('YYYY-MM-DD'),type:\"date\",name:\"cons_appo_date\",onChange:function onChange(e){handleInputChange(e);},required:true}))),/*#__PURE__*/React.createElement(FormGroup,{className:\"row\"},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,{className:\"form-control-label\"},\"Hora \",reqTag),/*#__PURE__*/React.createElement(Input,{value:appointment.cons_appo_time,type:\"time\",name:\"cons_appo_time\",onChange:function onChange(e){handleInputChange(e);},required:true}),/*#__PURE__*/React.createElement(\"h5\",{align:\"right\",style:{marginRight:\"10px\",marginBottom:\"0px\"}},\"La cita posee una duraci\\xF3n de 2 horas\"))),/*#__PURE__*/React.createElement(FormGroup,{className:\"row\"},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,{className:\"form-control-label\"},\"Profesional \",reqTag),/*#__PURE__*/React.createElement(InputGroup,null,/*#__PURE__*/React.createElement(Input,{style:{backgroundColor:\"white\"},required:true,readOnly:true,type:\"text\",name:\"professional_fullname\",value:professional.professional_fullname}),/*#__PURE__*/React.createElement(InputGroupAddon,{addonType:\"append\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-search btn btn-primary\",onClick:function onClick(){return showModalProfessionals();}}))))),/*#__PURE__*/React.createElement(FormGroup,{className:\"row\"},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,{className:\"form-control-label\"},\"Lugar\"),/*#__PURE__*/React.createElement(Input,{autoComplete:\"off\",maxLength:\"250\",type:\"textarea\",name:\"cons_appo_place\",value:appointment.cons_appo_place,onChange:function onChange(e){return handleInputChange(e);}}))),/*#__PURE__*/React.createElement(FormGroup,{className:\"row\"},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Label,{className:\"form-control-label\"},\"Descripci\\xF3n\"),/*#__PURE__*/React.createElement(Input,{autoComplete:\"off\",maxLength:\"250\",type:\"textarea\",name:\"cons_appo_description\",value:appointment.cons_appo_description,onChange:function onChange(e){return handleInputChange(e);}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"float-right mb-2 mr-2\"},appointment.cons_appo_id==0?/*#__PURE__*/React.createElement(Button,{color:\"primary\",onClick:function onClick(){saveAppointment();}},\"Guardar\"):/*#__PURE__*/React.createElement(Button,{color:\"primary\",onClick:function onClick(){updateAppointment();}},\"Modificar\")),/*#__PURE__*/React.createElement(\"h5\",{style:{color:\"#DC3545\"}},\"* Existen campos obligatorios\"))),/*#__PURE__*/React.createElement(Modal,{size:\"lg\",isOpen:displayModalAppointments},/*#__PURE__*/React.createElement(ModalHeader,{toggle:function toggle(){setDisplayModalAppointments(!displayModalAppointments);}},\"Agenda\"),/*#__PURE__*/React.createElement(ModalBody,{className:\"pt-1\"},/*#__PURE__*/React.createElement(Table,{className:\"align-items-center\",responsive:true},/*#__PURE__*/React.createElement(\"thead\",{className:\"thead-light\"},/*#__PURE__*/React.createElement(\"tr\",{className:\"text-center\"},/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Paciente\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Dia / Hora\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Profesional\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"}),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"}))),/*#__PURE__*/React.createElement(\"tbody\",null,appointments.map(function(appointment){return/*#__PURE__*/React.createElement(\"tr\",{className:\"text-center\",key:appointment.cons_appo_id},/*#__PURE__*/React.createElement(\"td\",null,appointment.run),/*#__PURE__*/React.createElement(\"td\",null,moment(appointment.cons_appo_date).format('DD-MM-YYYY'),\" / \",moment(appointment.cons_appo_time,\"HH:mm\").format('HH:mm')),/*#__PURE__*/React.createElement(\"td\",null,appointment.professional_fullname),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Button,{color:\"primary\",onClick:function onClick(){return showModalAppointmentToUpdate(appointment);}},\"Editar\")),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Button,{color:\"danger\",size:\"sm\",onClick:function onClick(){return setSimpleModal({title:'Agenda',text:'¿Desea eliminar agenda del '+moment(appointment.cons_appo_date).format('DD-MM-YYYY')+' a las '+moment(appointment.cons_appo_time,\"HH:mm\").format('HH:mm')+'?',type:2,fx:function fx(){return disableAppointment(appointment.cons_appo_id);}});}},/*#__PURE__*/React.createElement(\"i\",{className:\"far fa-trash-alt\"}))));}))))),/*#__PURE__*/React.createElement(Modal,{size:\"lg\",isOpen:displayModalProfessionals},/*#__PURE__*/React.createElement(ModalHeader,{toggle:function toggle(){setDisplayModalProfessionals(!displayModalProfessionals);}},\"Profesionales\"),/*#__PURE__*/React.createElement(ModalBody,{className:\"pt-1\"},/*#__PURE__*/React.createElement(Input,{type:\"text\",placeholder:\"Buscar profesional...\",value:searchTermProfessional,onChange:function onChange(e){return setSearchTermProfessional(e.target.value);}}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Table,{className:\"align-items-center\",responsive:true},/*#__PURE__*/React.createElement(\"thead\",{className:\"thead-light\"},/*#__PURE__*/React.createElement(\"tr\",{className:\"text-center\"},/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Profesional\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"\\xC1rea de Especialidad\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Email\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"}))),/*#__PURE__*/React.createElement(\"tbody\",null,professionals.filter(function(val){if(searchTermProfessional==\"\"){return val;}else if(val.professional_run.includes(searchTermProfessional)||val.professional_fullname.toLowerCase().includes(searchTermProfessional.toLowerCase())||val.professional_medical_area_name.toLowerCase().includes(searchTermProfessional.toLowerCase())){return val;}}).map(function(professional){return/*#__PURE__*/React.createElement(\"tr\",{className:\"text-center\",key:professional.professional_id+''+professional.professional_medical_area_id},/*#__PURE__*/React.createElement(\"td\",null,professional.professional_fullname),/*#__PURE__*/React.createElement(\"td\",null,professional.professional_medical_area_name),/*#__PURE__*/React.createElement(\"td\",null,professional.professional_email),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return obtener(professional);},color:\"primary\"},\"Seleccionar\")));}))))),cleanLocation&&/*#__PURE__*/React.createElement(Redirect,{to:{pathname:\"/admin/consultation-appointment\",state:{}}}));};export default ConsultationAppointment;","map":{"version":3,"sources":["C:/Users/Christian/Desktop/tele/Nueva carpeta/src/views/pages/patient/consultation-appointment.js"],"names":["Redirect","React","useState","useEffect","useRef","Alert","Button","Col","Container","FormGroup","Input","Card","CardBody","Label","Table","Modal","ModalHeader","ModalBody","InputGroupAddon","InputGroup","getList","moment","axios","SimpleModal","ConsultationAppointment","location","cleanLocation","setCleanLocation","newAppointment","setNewAppointment","reqTag","color","l_run","state","run","modalRef","setSimpleModal","options","current","setModal","searchTerm","setSearchTerm","person","setPerson","persons","setPersons","loading","setLoading","fetchPersons","res","setTimeout","cambiar","defaultProfessional","professional_id","professional_fullname","professional","setProfessional","professionals","setProfessionals","displayModalProfessionals","setDisplayModalProfessionals","searchTermProfessional","setSearchTermProfessional","showModalProfessionals","fetchProfessionals","obtener","displayModalAppointments","setDisplayModalAppointments","appointments","setAppointments","showModalAppointments","fetchAppointments","person_id","defaultAppointment","cons_appo_id","cons_appo_date","cons_appo_time","cons_appo_place","cons_appo_description","displayModalAppointment","setDisplayModalAppointment","appointment","setAppointment","showModalAppointmentToCreate","showModalAppointmentToUpdate","handleInputChange","e","target","name","value","disableAppointment","id","put","updateAppointment","post","data","error","console","log","result","code","sqlMessage","saveAppointment","ingresado","setIngresado","filter","val","includes","fullname","toLowerCase","map","e_person","names","lastnames","format","marginRight","marginBottom","backgroundColor","title","text","type","fx","professional_run","professional_medical_area_name","professional_medical_area_id","professional_email","pathname"],"mappings":"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","sourcesContent":["// import \"assets/css/custom-style.css\";\r\nimport {Redirect} from 'react-router-dom';\r\nimport React, {useState, useEffect, useRef} from 'react';\r\nimport {Alert, Button, Col, Container, FormGroup, Input, Card, CardBody, Label, Table, Modal, ModalHeader, ModalBody, InputGroupAddon, InputGroup} from 'reactstrap';\r\nimport {getList} from 'helpers/ListHelper';\r\nimport moment from 'moment';\r\nimport axios from '../../../helpers/axiosConfig';\r\nimport SimpleModal from \"../components/SimpleModal\";\r\n\r\nconst ConsultationAppointment = ({location}) => {\r\n    \r\n    const [cleanLocation, setCleanLocation] = useState(false)\r\n    const [newAppointment, setNewAppointment] = useState(false);\r\n    const reqTag = <span style={{color:\"#DC3545\"}}>*</span>\r\n    let l_run = \"\"\r\n    if(location?.state?.run) {\r\n        l_run = location.state.run;\r\n    }\r\n\r\n    const modalRef = useRef()\r\n    const setSimpleModal = (options) => {\r\n        modalRef.current.setModal(options);\r\n    };  \r\n\r\n    const [searchTerm, setSearchTerm] = useState(l_run);\r\n    const [person, setPerson] = useState({});\r\n    const [persons, setPersons] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    const fetchPersons = async () => {\r\n        const res = await getList(\"list/person\");\r\n        setLoading(false)\r\n        setPersons(res);\r\n    };\r\n\r\n    useEffect(() => { \r\n        setTimeout(fetchPersons, 1000);\r\n        cambiar();\r\n        return () => {\r\n            setCleanLocation(true);\r\n        }\r\n        \r\n    }, []);\r\n\r\n    /*Professionals###########################################################################*/ \r\n    const defaultProfessional = {professional_id: 0, professional_fullname: \"\"};\r\n    const [professional, setProfessional] = useState(defaultProfessional);\r\n    const [professionals, setProfessionals] = useState([]);\r\n    const [displayModalProfessionals, setDisplayModalProfessionals] = useState(false);\r\n    const [searchTermProfessional, setSearchTermProfessional] = useState(\"\");\r\n\r\n    const showModalProfessionals = async () => {\r\n        fetchProfessionals();\r\n        setDisplayModalProfessionals(!displayModalProfessionals);\r\n        setSearchTermProfessional(\"\");\r\n    }\r\n\r\n    const obtener = async professional => {\r\n        setProfessional(professional)\r\n        setDisplayModalProfessionals(!displayModalProfessionals);\r\n    };\r\n\r\n    const fetchProfessionals = async () => {\r\n        const res = await getList(\"user/user-professional\");\r\n        setProfessionals(res);\r\n    };\r\n    /*Professionals###########################################################################*/ \r\n\r\n    /*Appointments###############################################################################*/ \r\n    const [displayModalAppointments, setDisplayModalAppointments] = useState(false);\r\n    const [appointments, setAppointments] = useState([]);\r\n    \r\n    const showModalAppointments = async (person) => {\r\n        setPerson(person);\r\n        fetchAppointments(person.person_id);\r\n        setDisplayModalAppointments(!displayModalAppointments);\r\n    }\r\n\r\n    const fetchAppointments = async person_id => {\r\n        const res = await getList(\"consultation-appointment/\" + person_id);\r\n        setAppointments(res);\r\n    }; \r\n    /*Appointments###############################################################################*/ \r\n\r\n    /*Appointment################################################################################*/ \r\n    const defaultAppointment = {cons_appo_id: 0, cons_appo_date: moment(), cons_appo_time: \"09:00\", professional_id: \"\", cons_appo_place: \"\", cons_appo_description: \"\"};\r\n    const [displayModalAppointment, setDisplayModalAppointment] = useState(false);\r\n    const [appointment, setAppointment] = useState(defaultAppointment);\r\n\r\n    const showModalAppointmentToCreate = person => {\r\n        setPerson(person);\r\n        setAppointment(defaultAppointment);\r\n        setProfessional(defaultProfessional);\r\n        setDisplayModalAppointment(!displayModalAppointment);\r\n    };\r\n\r\n    const showModalAppointmentToUpdate = appointment => {\r\n        setAppointment(appointment);\r\n        setProfessional({professional_id: appointment.professional_id, professional_fullname: appointment.professional_fullname})\r\n        setDisplayModalAppointment(!displayModalAppointment);\r\n    }\r\n\r\n    const handleInputChange = e => {\r\n        setAppointment({\r\n            ...appointment,\r\n            [e.target.name]: e.target.value\r\n        });\r\n    };\r\n    /*Appointment################################################################################*/ \r\n\r\n    /*Crud#######################################################################################*/ \r\n    const disableAppointment = async id => {\r\n        await axios.put(\"consultation-appointment/\" + id);\r\n        setSimpleModal({})\r\n        fetchAppointments(person.person_id);\r\n    };\r\n\r\n    const updateAppointment = async () => {\r\n        try {\r\n            const res = await axios.post( \"consultation-appointment/\" + appointment.cons_appo_id,\r\n            {   \r\n                cons_appo_date: appointment.cons_appo_date, \r\n                cons_appo_time: appointment.cons_appo_time,\r\n                professional_id: professional.professional_id,\r\n                cons_appo_place: appointment.cons_appo_place,\r\n                cons_appo_description: appointment.cons_appo_description\r\n            });\r\n\r\n            if (!res.data.error) {\r\n                setDisplayModalAppointment(!displayModalAppointment);\r\n                fetchAppointments(person.person_id);\r\n            } else {\r\n                console.log('Err: ' + res.data.result.code + ' ' + res.data.result.sqlMessage);\r\n            };\r\n        } catch(e) {\r\n            console.log('Err: ' + e);\r\n        };\r\n    };\r\n\r\n    const saveAppointment = async () => {\r\n        try {\r\n            const res = await axios.post(\"consultation-appointment\",\r\n            {   person_id: person.person_id, \r\n                cons_appo_date: appointment.cons_appo_date , \r\n                cons_appo_time: appointment.cons_appo_time,\r\n                professional_id: professional.professional_id,\r\n                cons_appo_place: appointment.cons_appo_place,\r\n                cons_appo_description: appointment.cons_appo_description\r\n            });\r\n            if (!res.data.error) {\r\n                setDisplayModalAppointment(!displayModalAppointment);\r\n                setNewAppointment(true);\r\n                //showModalAppointments(person);\r\n            } else {\r\n                console.log('Err: ' + res.data.result.code + ' ' + res.data.result.sqlMessage);\r\n            };\r\n        } catch(e) {\r\n            console.log('Err: ' + e);\r\n        };\r\n    };\r\n    /*Crud#######################################################################################*/ \r\n    \r\n    const [ingresado, setIngresado]=useState(false)\r\n\r\n    const cambiar =()=>{\r\n        if(location?.state?.ingresado){\r\n              setIngresado(!ingresado)\r\n            }\r\n        }\r\n\r\n    return (\r\n        <Container className=\"mt-3\">\r\n            <SimpleModal ref={modalRef}/>\r\n            \r\n            {location?.state?.ingresado && <Alert color=\"success\" isOpen={ingresado} toggle={() => {setIngresado(false)}}>\r\n                Paciente ingresado exitosamente\r\n            </Alert> }\r\n            <Alert color=\"success\" isOpen={newAppointment} toggle={() => {setNewAppointment(false)}}>\r\n                La consulta fue agendada exitosamente\r\n            </Alert>\r\n            <Card>\r\n                <CardBody>\r\n                    \r\n                    <h1>Agendar Consulta</h1>\r\n                    <Input \r\n                        type=\"text\" \r\n                        placeholder=\"Buscar...\"\r\n                        name=\"look_for\"\r\n                        value={searchTerm}\r\n                        onChange={e => setSearchTerm(e.target.value)}\r\n                    />\r\n                    <br/>\r\n                    {loading \r\n                        ?<div className=\"w-100 d-flex justify-content-center\">\r\n                            <div className=\"loader\"></div>\r\n                        </div>\r\n                        :<Table className=\"align-items-center\" responsive>\r\n                            <thead className=\"thead-light\">\r\n                                <tr className=\"text-center\">\r\n                                    <th scope=\"col\">ID</th>\r\n                                    <th scope=\"col\">Rut</th>\r\n                                    <th scope=\"col\">Nombre</th>\r\n                                    <th scope=\"col\">Apellidos</th>    \r\n                                    <th scope=\"col\"></th>\r\n                                    <th scope=\"col\"></th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                {persons.filter(val => {\r\n                                    if(searchTerm == \"\") {\r\n                                        return val;\r\n                                    } else if (val.run.includes(searchTerm) || val.fullname.toLowerCase().includes(searchTerm.toLowerCase())) {\r\n                                        return val;\r\n                                    }\r\n                                }).map(e_person => (\r\n                                    <tr className=\"text-center\" key={e_person.person_id}>\r\n                                        <td>{e_person.person_id}</td>\r\n                                        <td>{e_person.run}</td>\r\n                                        <td>{e_person.names}</td>\r\n                                        <td>{e_person.lastnames}</td>\r\n                                        <td><Button color=\"primary\" onClick={() => showModalAppointmentToCreate(e_person)}>Nuevo</Button></td>\r\n                                        <td><Button onClick={() => showModalAppointments(e_person)}>Listado</Button></td>\r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </Table>\r\n                    }\r\n                </CardBody>\r\n            </Card>\r\n            <Modal isOpen={displayModalAppointment}>\r\n                <ModalHeader toggle={() => {setDisplayModalAppointment(!displayModalAppointment)}}>\r\n                    Agenda\r\n                </ModalHeader>\r\n                <ModalBody className= \"pt-2\">\r\n                    <FormGroup className=\"row\">\r\n                        <Col>\r\n                            <Label className=\"form-control-label\">Fecha {reqTag}</Label>\r\n                            <Input\r\n                                value={moment(appointment.cons_appo_date).format('YYYY-MM-DD')}\r\n                                type=\"date\"\r\n                                name=\"cons_appo_date\"\r\n                                onChange={e => {handleInputChange(e)}}\r\n                                required\r\n                            />\r\n                        </Col>\r\n                    </FormGroup>\r\n                    <FormGroup className=\"row\">\r\n                        <Col>\r\n                            <Label className=\"form-control-label\">Hora {reqTag}</Label>\r\n                            <Input\r\n                                value={appointment.cons_appo_time}\r\n                                type=\"time\"\r\n                                name=\"cons_appo_time\"\r\n                                onChange={e => {handleInputChange(e)}}\r\n                                required\r\n                            />\r\n                            <h5 align=\"right\" style={{marginRight: \"10px\", marginBottom: \"0px\"}}>La cita posee una duración de 2 horas</h5>\r\n                        </Col>\r\n                    </FormGroup>\r\n                    <FormGroup className=\"row\">\r\n                        <Col>\r\n                            <Label className=\"form-control-label\">Profesional {reqTag}</Label>\r\n                            <InputGroup>\r\n                                <Input\r\n                                    style={{backgroundColor: \"white\"}}\r\n                                    required\r\n                                    readOnly\r\n                                    type=\"text\"\r\n                                    name=\"professional_fullname\"\r\n                                    value={professional.professional_fullname}\r\n                                />\r\n                                <InputGroupAddon addonType=\"append\">\r\n                                    <i className=\"fas fa-search btn btn-primary\" onClick={() => showModalProfessionals()}></i>\r\n                                </InputGroupAddon>\r\n                            </InputGroup>\r\n                        </Col>\r\n                    </FormGroup>\r\n                    <FormGroup className=\"row\">\r\n                        <Col>\r\n                            <Label className=\"form-control-label\">Lugar</Label>\r\n                            <Input \r\n                                autoComplete=\"off\" maxLength=\"250\" type=\"textarea\"\r\n                                name=\"cons_appo_place\"\r\n                                value={appointment.cons_appo_place}\r\n                                onChange={e => handleInputChange(e)}\r\n                            />\r\n                        </Col>\r\n                    </FormGroup>\r\n                    <FormGroup className=\"row\">\r\n                        <Col>\r\n                            <Label className=\"form-control-label\">Descripción</Label>\r\n                            <Input \r\n                                autoComplete=\"off\" maxLength=\"250\"\r\n                                type=\"textarea\"\r\n                                name=\"cons_appo_description\"\r\n                                value={appointment.cons_appo_description}\r\n                                onChange={e => handleInputChange(e)}\r\n                            />\r\n                        </Col>\r\n                    </FormGroup>\r\n                    <div className= \"float-right mb-2 mr-2\">\r\n                        {appointment.cons_appo_id == 0 \r\n                            ? <Button color=\"primary\" onClick={() => {saveAppointment()}}>Guardar</Button>\r\n                            : <Button color=\"primary\" onClick={() => {updateAppointment()}}>Modificar</Button>\r\n                        }\r\n                    </div>\r\n                    <h5 style={{color:\"#DC3545\"}}>* Existen campos obligatorios</h5>\r\n                </ModalBody>\r\n            </Modal>\r\n            <Modal size=\"lg\" isOpen={displayModalAppointments}>\r\n                <ModalHeader toggle={() => {setDisplayModalAppointments(!displayModalAppointments)}}>\r\n                    Agenda\r\n                </ModalHeader>\r\n                <ModalBody className= \"pt-1\">\r\n                    <Table className=\"align-items-center\" responsive>\r\n                        <thead className=\"thead-light\">\r\n                            <tr className=\"text-center\">\r\n                                <th scope=\"col\">Paciente</th>\r\n                                <th scope=\"col\">Dia / Hora</th>\r\n                                <th scope=\"col\">Profesional</th>\r\n                                <th scope=\"col\"></th>\r\n                                <th scope=\"col\"></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {appointments.map(appointment => (\r\n                                <tr className=\"text-center\" key={appointment.cons_appo_id}>\r\n                                    <td>{appointment.run}</td>\r\n                                    <td>{moment(appointment.cons_appo_date).format('DD-MM-YYYY')} / {moment(appointment.cons_appo_time,\"HH:mm\").format('HH:mm')}</td>\r\n                                    <td>{appointment.professional_fullname}</td>\r\n                                    <td>\r\n                                        <Button color=\"primary\" onClick={() => showModalAppointmentToUpdate(appointment)}>Editar</Button>\r\n                                    </td>\r\n                                    <td>\r\n                                        <Button color=\"danger\" size=\"sm\" onClick={\r\n                                            () => setSimpleModal({title: 'Agenda', text : '¿Desea eliminar agenda del ' + moment(appointment.cons_appo_date).format('DD-MM-YYYY') + ' a las ' + moment(appointment.cons_appo_time,\"HH:mm\").format('HH:mm') + '?', type: 2, fx: () => disableAppointment(appointment.cons_appo_id)})\r\n                                        }><i className=\"far fa-trash-alt\"></i></Button>\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </Table>\r\n                </ModalBody>\r\n            </Modal>\r\n            <Modal size=\"lg\" isOpen={displayModalProfessionals}>\r\n                <ModalHeader toggle={() => {setDisplayModalProfessionals(!displayModalProfessionals)}}>\r\n                    Profesionales\r\n                </ModalHeader>\r\n                <ModalBody className= \"pt-1\">\r\n                    <Input \r\n                        type=\"text\" \r\n                        placeholder=\"Buscar profesional...\"\r\n                        value={searchTermProfessional}\r\n                        onChange={e => setSearchTermProfessional(e.target.value)}\r\n                    />\r\n                    <br/>\r\n                    <Table className=\"align-items-center\" responsive>\r\n                        <thead className=\"thead-light\">\r\n                            <tr className=\"text-center\">\r\n                                <th scope=\"col\">Profesional</th>\r\n                                <th scope=\"col\">Área de Especialidad</th>\r\n                                <th scope=\"col\">Email</th>\r\n                                <th scope=\"col\"></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {professionals.filter(val => {\r\n                                if(searchTermProfessional == \"\") {\r\n                                    return val;\r\n                                } else if (val.professional_run.includes(searchTermProfessional) || val.professional_fullname.toLowerCase().includes(searchTermProfessional.toLowerCase()) || val.professional_medical_area_name.toLowerCase().includes(searchTermProfessional.toLowerCase())) {\r\n                                    return val;\r\n                                }\r\n                            }).map(professional => (\r\n                                <tr className=\"text-center\" key={professional.professional_id + '' + professional.professional_medical_area_id}>\r\n                                    <td>{professional.professional_fullname}</td>\r\n                                    <td>{professional.professional_medical_area_name}</td>\r\n                                    <td>{professional.professional_email}</td>\r\n                                    <td>\r\n                                        <Button onClick={() => obtener(professional)} color=\"primary\">Seleccionar</Button>\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </Table>\r\n                </ModalBody>\r\n            </Modal>\r\n            {cleanLocation && \r\n                <Redirect to={\r\n                    {pathname: \"/admin/consultation-appointment\",\r\n                    state: {}}\r\n                }/> \r\n            }\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default ConsultationAppointment;"]},"metadata":{},"sourceType":"module"}