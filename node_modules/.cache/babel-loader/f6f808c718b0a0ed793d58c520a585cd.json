{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Christian\\\\Desktop\\\\tele\\\\Nueva carpeta\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Christian\\\\Desktop\\\\tele\\\\Nueva carpeta\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\Christian\\\\Desktop\\\\tele\\\\Nueva carpeta\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Christian\\\\Desktop\\\\tele\\\\Nueva carpeta\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import jwt_decode from'jwt-decode';import Axios from\"axios\";import galleta from'js-cookie';var AuthService=/*#__PURE__*/function(){function AuthService(){_classCallCheck(this,AuthService);this.login=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(username,password){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Axios.post(process.env.REACT_APP_API_URL+\"session/login\",{username:username,password:password}).then(function(res){if(res.data.auth==true){galleta.set('user',{'user':res.data},{expires:1/3});console.log(galleta.getJSON('user'));var name=jwt_decode(res.data.token).names;localStorage.setItem(\"name\",name);}return res.data;});case 2:return _context.abrupt(\"return\",_context.sent);case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();this.getName=function(){return localStorage.getItem(\"name\");};}_createClass(AuthService,[{key:\"logout\",value:function(){var _logout=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var logout;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:galleta.remove('user');_context2.next=3;return Axios.post(process.env.REACT_APP_API_URL+\"session/logout\",{},{withCredentials:true});case 3:logout=_context2.sent;case 4:case\"end\":return _context2.stop();}}},_callee2);}));function logout(){return _logout.apply(this,arguments);}return logout;}()},{key:\"isAuthenticated\",value:function isAuthenticated(){if(galleta.get('user')){return true;}else{return false;}}},{key:\"getUserId\",value:function getUserId(){var token=galleta.get(\"user\");if(token){var decoded=jwt_decode(token);return decoded.id;}}}]);return AuthService;}();export default new AuthService();","map":{"version":3,"sources":["C:/Users/Christian/Desktop/tele/Nueva carpeta/src/helpers/AuthHelper.js"],"names":["jwt_decode","Axios","galleta","AuthService","login","username","password","post","process","env","REACT_APP_API_URL","then","res","data","auth","set","expires","console","log","getJSON","name","token","names","localStorage","setItem","getName","getItem","remove","withCredentials","logout","get","decoded","id"],"mappings":"mrBAAA,MAAOA,CAAAA,UAAP,KAAuB,YAAvB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,C,GAGMC,CAAAA,W,uFAEFC,K,0FAAQ,iBAAOC,QAAP,CAAiBC,QAAjB,wIACSL,CAAAA,KAAK,CAACM,IAAN,CAAWC,OAAO,CAACC,GAAR,CAAYC,iBAAZ,CAAgC,eAA3C,CAA4D,CACrEL,QAAQ,CAAEA,QAD2D,CAErEC,QAAQ,CAAEA,QAF2D,CAA5D,EAGVK,IAHU,CAGL,SAAAC,GAAG,CAAI,CACX,GAAGA,GAAG,CAACC,IAAJ,CAASC,IAAT,EAAiB,IAApB,CAAyB,CACrBZ,OAAO,CAACa,GAAR,CAAY,MAAZ,CAAoB,CAAC,OAAOH,GAAG,CAACC,IAAZ,CAApB,CAAsC,CAACG,OAAO,CAAC,EAAE,CAAX,CAAtC,EACAC,OAAO,CAACC,GAAR,CAAYhB,OAAO,CAACiB,OAAR,CAAgB,MAAhB,CAAZ,EACA,GAAIC,CAAAA,IAAI,CAAGpB,UAAU,CAACY,GAAG,CAACC,IAAJ,CAASQ,KAAV,CAAV,CAA2BC,KAAtC,CACAC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAA6BJ,IAA7B,EACH,CACD,MAAOR,CAAAA,GAAG,CAACC,IAAX,CACH,CAXY,CADT,6G,wEAmCRY,O,CAAU,iBAAMF,CAAAA,YAAY,CAACG,OAAb,CAAqB,MAArB,CAAN,E,kRApBNxB,OAAO,CAACyB,MAAR,CAAe,MAAf,E,uBACqB1B,CAAAA,KAAK,CAACM,IAAN,CAAWC,OAAO,CAACC,GAAR,CAAYC,iBAAZ,CAAgC,gBAA3C,CAA4D,EAA5D,CAA+D,CAACkB,eAAe,CAAC,IAAjB,CAA/D,C,QAAfC,M,6MAGO,CACb,GAAI3B,OAAO,CAAC4B,GAAR,CAAY,MAAZ,CAAJ,CAAwB,CACpB,MAAO,KAAP,CACH,CAFD,IAEO,CACH,MAAO,MAAP,CACH,CACJ,C,6CAEU,CACP,GAAIT,CAAAA,KAAK,CAAGnB,OAAO,CAAC4B,GAAR,CAAY,MAAZ,CAAZ,CACA,GAAIT,KAAJ,CAAU,CACN,GAAIU,CAAAA,OAAO,CAAG/B,UAAU,CAACqB,KAAD,CAAxB,CACA,MAAOU,CAAAA,OAAO,CAACC,EAAf,CACH,CACJ,C,2BAOL,cAAe,IAAI7B,CAAAA,WAAJ,EAAf","sourcesContent":["import jwt_decode from 'jwt-decode';\r\nimport Axios from \"axios\";\r\nimport galleta from 'js-cookie'\r\n\r\n\r\nclass AuthService {\r\n\r\n    login = async (username, password) => {\r\n        return await Axios.post(process.env.REACT_APP_API_URL + \"session/login\", {\r\n            username: username,\r\n            password: password\r\n        }).then(res => {\r\n            if(res.data.auth == true){\r\n                galleta.set('user', {'user':res.data},{expires:1/3})\r\n                console.log(galleta.getJSON('user'))\r\n                let name = jwt_decode(res.data.token).names\r\n                localStorage.setItem(\"name\", name)\r\n            }\r\n            return res.data\r\n        })\r\n    }\r\n    async logout(){\r\n        galleta.remove('user')\r\n        const logout = await Axios.post(process.env.REACT_APP_API_URL + \"session/logout\",{},{withCredentials:true})\r\n    }\r\n\r\n    isAuthenticated(){\r\n        if (galleta.get('user')){\r\n            return true\r\n        } else {\r\n            return false\r\n        }\r\n    }\r\n\r\n    getUserId(){\r\n        let token = galleta.get(\"user\")\r\n        if (token){\r\n            let decoded = jwt_decode(token);\r\n            return decoded.id;\r\n        }\r\n    }\r\n\r\n    getName = () => localStorage.getItem(\"name\")\r\n\r\n}\r\n\r\n\r\nexport default new AuthService();"]},"metadata":{},"sourceType":"module"}