{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\Christian\\\\WebstormProjects\\\\teleodontoweb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Christian\\\\WebstormProjects\\\\teleodontoweb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\Christian\\\\WebstormProjects\\\\teleodontoweb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\Christian\\\\WebstormProjects\\\\teleodontoweb\\\\src\\\\views\\\\pages\\\\patient\\\\peridontrograma.js\";\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Button, Col, Container, Form, FormGroup, Input, Row, InputGroup, InputGroupText, InputGroupAddon, Card, CardBody, Label } from 'reactstrap';\nimport classnames from \"classnames\";\nimport CardHeader from 'reactstrap/lib/CardHeader';\nimport Axios from '../../../helpers/axiosConfig';\nimport { Redirect } from 'react-router-dom';\nimport SimpleModal from \"../components/SimpleModal\";\n\nvar Periodontogram = function Periodontogram(_ref) {\n  var location = _ref.location;\n  var modalRef = useRef();\n\n  var setModal = function setModal(options) {\n    modalRef.current.setModal(options);\n  };\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      next = _useState2[0],\n      setNext = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      periodontalDiagnosis = _useState4[0],\n      setPeriodontalDiagnosis = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      odontologicalDiagnosis = _useState6[0],\n      setOdontologicalDiagnosis = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      treatmentPlan = _useState8[0],\n      setTreatmentPlan = _useState8[1]; //LOCATION###############################################################\n\n\n  useEffect(function () {\n    fetchFiles();\n  }, []); //FILE###################################################################\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      fileName = _useState10[0],\n      setFileName = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      fileType = _useState12[0],\n      setFileType = _useState12[1];\n\n  var _useState13 = useState({}),\n      _useState14 = _slicedToArray(_useState13, 2),\n      file = _useState14[0],\n      setFile = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      hasFile = _useState16[0],\n      setHasFile = _useState16[1];\n\n  var _useState17 = useState([]),\n      _useState18 = _slicedToArray(_useState17, 2),\n      files = _useState18[0],\n      setFiles = _useState18[1];\n\n  var extAllowed = \"pdf\";\n  var sizAllowed = 10000000;\n  var defaultHelpText = extAllowed + \" (max: \" + sizAllowed / 1000000 + \" MB)\";\n\n  var _useState19 = useState(defaultHelpText),\n      _useState20 = _slicedToArray(_useState19, 2),\n      helpText = _useState20[0],\n      setHelpText = _useState20[1];\n\n  var handleHasFile = function handleHasFile() {\n    setHasFile(!hasFile);\n    cleanFile();\n    setHelpText(defaultHelpText);\n  };\n\n  var fetchFiles = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return Axios.post(\"photo/odonto_geriatra/obtain\", {\n                anamnId: location.state.anamId\n              });\n\n            case 2:\n              res = _context.sent;\n\n              if (!res.data.error) {\n                setFiles(res.data.result);\n                setModal({});\n              }\n\n              ;\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function fetchFiles() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var loadFile = function loadFile(file) {\n    var _file$;\n\n    if ((_file$ = file[0]) === null || _file$ === void 0 ? void 0 : _file$.name) {\n      var _file$2;\n\n      var size = file[0].size;\n      var full = (_file$2 = file[0]) === null || _file$2 === void 0 ? void 0 : _file$2.name;\n      var type = full.slice((full.lastIndexOf('.') - 1 >>> 0) + 2).toLowerCase();\n\n      if (extAllowed.indexOf(type) >= 0) {\n        if (size <= sizAllowed) {\n          setFileName(full.slice(0, full.lastIndexOf('.')));\n          setFileType(type);\n          setFile(file);\n          setHelpText(full);\n          return;\n        } else {\n          cleanFile();\n          setHelpText(\"Tamaño de archivo invalido\");\n          return;\n        }\n\n        ;\n      }\n\n      ;\n      cleanFile();\n      setHelpText(\"Formato de archivo invalido\");\n    }\n\n    ;\n  };\n\n  var cleanFile = function cleanFile() {\n    setFileName(\"\");\n    setFileType(\"\");\n    setFile({});\n  };\n\n  var uploadFile = function uploadFile() {\n    if (fileName) {\n      var f = new FormData();\n      f.append(\"file\", file[0], fileName + '.' + fileType);\n      Axios.post(\"file/img_odonto/\" + location.state.run, f).then(function (response) {\n        saveFile();\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n\n    ;\n  };\n\n  var saveFile = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return Axios.post(\"photo/odonto_geriatra\", {\n                anamnId: location.state.anamId,\n                nombreImagen: fileName + '.' + fileType,\n                ruta: \"static/images_anam_odonto/\" + location.state.run\n              });\n\n            case 2:\n              res = _context2.sent;\n\n              if (!res.data.error) {\n                fetchFiles();\n                cleanFile();\n                setHelpText(defaultHelpText);\n                setHasFile(false);\n              }\n\n              ;\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function saveFile() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var removeFile = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(fId, name) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return Axios.post(\"photo/odonto_geriatra/rm/\", {\n                fId: fId,\n                route: location.state.run + '/' + name\n              });\n\n            case 2:\n              res = _context3.sent;\n\n              if (!res.data.error) {\n                fetchFiles();\n              }\n\n              ;\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function removeFile(_x, _x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var addDiagnosticos = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              e.preventDefault();\n              _context4.next = 3;\n              return Axios.post(\"geriatrical-odonto-anamnesis/periodontograma\", {\n                anamId: location.state.anamId,\n                periodontalDiagnosis: periodontalDiagnosis,\n                odontologicalDiagnosis: odontologicalDiagnosis,\n                treatmentPlan: treatmentPlan\n              });\n\n            case 3:\n              res = _context4.sent;\n\n              if (!res.data.error) {\n                setNext(true);\n              }\n\n              ;\n\n            case 6:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function addDiagnosticos(_x3) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(SimpleModal, {\n    ref: modalRef,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Card, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CardBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }, location.state.run, \", \", location.state.name, \" \", location.state.apellido), /*#__PURE__*/React.createElement(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 21\n    }\n  }, \"Anamnesis Odonto-geri\\xE1trica\"), /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"heading-small text-muted mb-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 21\n    }\n  }, \"Periodontograma\"), /*#__PURE__*/React.createElement(Form, {\n    onSubmit: addDiagnosticos,\n    role: \"form\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(FormGroup, {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    className: \"form-control-label mb-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 29\n    }\n  }, \"Periodontograma (\", /*#__PURE__*/React.createElement(\"a\", {\n    href: \"https://sepa.es/periodontograma/index.html\",\n    target: \"_blank\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 89\n    }\n  }, \"Link a SEPA\"), \")\"))), /*#__PURE__*/React.createElement(FormGroup, {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: \"6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    className: \"form-control-label mb-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 29\n    }\n  }, \"Archivos disponibles\"), files.map(function (file) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: file.foto_id,\n      className: \"list-group mb-2\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(InputGroup, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"mr-2\",\n      color: \"danger\",\n      size: \"sm\",\n      outline: true,\n      onClick: function onClick() {\n        return setModal({\n          title: 'Confirmación',\n          text: 'Desea eliminar ' + file.foto_nombre + '?',\n          type: 2,\n          fx: function fx() {\n            return removeFile(file.foto_id, file.foto_nombre);\n          }\n        });\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"far fa-trash-alt\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 262\n      }\n    })), /*#__PURE__*/React.createElement(\"a\", {\n      rel: \"noopener noreferrer\",\n      target: \"_blank\",\n      href: process.env.REACT_APP_API_URL + \"\".concat(file.url) + \"/\" + \"\".concat(file.foto_nombre),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 41\n      }\n    }, file.foto_nombre)));\n  })), /*#__PURE__*/React.createElement(Col, {\n    md: \"6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(FormGroup, {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    className: \"d-flex\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    className: \"form-control-label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 45\n    }\n  }, \"\\xBFSubir periodontograma?\"), /*#__PURE__*/React.createElement(\"label\", {\n    className: \"custom-toggle custom-toggle-info ml-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    type: \"checkbox\",\n    checked: hasFile,\n    onChange: function onChange() {\n      return handleHasFile();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 49\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"custom-toggle-slider rounded-circle\",\n    \"data-label-off\": \"No\",\n    \"data-label-on\": \"S\\xED\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 49\n    }\n  }))))), hasFile && /*#__PURE__*/React.createElement(CardBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(FormGroup, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(InputGroup, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(InputGroupAddon, {\n    addonType: \"prepend\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    color: \"primary\",\n    onClick: function onClick() {\n      return uploadFile();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 53\n    }\n  }, \"Agregar\")), /*#__PURE__*/React.createElement(Input, {\n    autoComplete: \"off\",\n    type: \"text\",\n    name: \"treatment_plan\",\n    value: fileName,\n    onChange: function onChange(e) {\n      return setFileName(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 49\n    }\n  }), /*#__PURE__*/React.createElement(InputGroupAddon, {\n    addonType: \"append\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    color: \"primary\",\n    onClick: function onClick() {\n      document.getElementById('files').click();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 53\n    }\n  }, \"Buscar\"))), /*#__PURE__*/React.createElement(\"h5\", {\n    align: \"right\",\n    style: {\n      marginRight: \"10px\",\n      marginBottom: \"0px\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 45\n    }\n  }, helpText), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    accept: \"image/*, .pdf\",\n    id: \"files\",\n    style: {\n      visibility: 'hidden'\n    },\n    onChange: function onChange(e) {\n      return loadFile(e.target.files);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 45\n    }\n  })))))), /*#__PURE__*/React.createElement(FormGroup, {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    className: \"form-control-label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 33\n    }\n  }, \"Diagnostico periodontal\"), /*#__PURE__*/React.createElement(Input, {\n    defaultValue: \"\",\n    id: \"example-text-input\",\n    type: \"textarea\",\n    onChange: function onChange(e) {\n      setPeriodontalDiagnosis(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 33\n    }\n  }))), /*#__PURE__*/React.createElement(FormGroup, {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    className: \"form-control-label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 33\n    }\n  }, \"Diagnostico Odontologico\"), /*#__PURE__*/React.createElement(Input, {\n    defaultValue: \"\",\n    id: \"example-text-input\",\n    type: \"textarea\",\n    onChange: function onChange(e) {\n      setOdontologicalDiagnosis(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 33\n    }\n  }))), /*#__PURE__*/React.createElement(FormGroup, {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    className: \"form-control-label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 33\n    }\n  }, \"Plan de tratamiento\"), /*#__PURE__*/React.createElement(Input, {\n    defaultValue: \"\",\n    id: \"example-text-input\",\n    type: \"textarea\",\n    onChange: function onChange(e) {\n      setTreatmentPlan(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 33\n    }\n  }))), /*#__PURE__*/React.createElement(FormGroup, {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: \"10\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(Col, {\n    md: \"2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    color: \"primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 31\n    }\n  }, \"Guardar\")))), next && /*#__PURE__*/React.createElement(Redirect, {\n    to: {\n      pathname: \"/admin/list-patient-anamnesis\",\n      state: {\n        id: location.state.id,\n        run: location.state.run,\n        name: location.state.name,\n        apellido: location.state.apellido,\n        anamId: location.state.anamId,\n        dentalAnamnesis: true\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 31\n    }\n  }))));\n};\n\nexport default Periodontogram;","map":{"version":3,"sources":["C:/Users/Christian/WebstormProjects/teleodontoweb/src/views/pages/patient/peridontrograma.js"],"names":["React","useState","useEffect","useRef","Button","Col","Container","Form","FormGroup","Input","Row","InputGroup","InputGroupText","InputGroupAddon","Card","CardBody","Label","classnames","CardHeader","Axios","Redirect","SimpleModal","Periodontogram","location","modalRef","setModal","options","current","next","setNext","periodontalDiagnosis","setPeriodontalDiagnosis","odontologicalDiagnosis","setOdontologicalDiagnosis","treatmentPlan","setTreatmentPlan","fetchFiles","fileName","setFileName","fileType","setFileType","file","setFile","hasFile","setHasFile","files","setFiles","extAllowed","sizAllowed","defaultHelpText","helpText","setHelpText","handleHasFile","cleanFile","post","anamnId","state","anamId","res","data","error","result","loadFile","name","size","full","type","slice","lastIndexOf","toLowerCase","indexOf","uploadFile","f","FormData","append","run","then","response","saveFile","catch","console","log","nombreImagen","ruta","removeFile","fId","route","addDiagnosticos","e","preventDefault","apellido","map","foto_id","title","text","foto_nombre","fx","process","env","REACT_APP_API_URL","url","target","value","document","getElementById","click","marginRight","marginBottom","visibility","pathname","id","dentalAnamnesis"],"mappings":"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","sourcesContent":["import React, {useState, useEffect,useRef} from 'react'\r\nimport {\r\n    Button, Col, Container, Form, FormGroup, Input, Row, InputGroup,\r\n    InputGroupText, InputGroupAddon, Card, CardBody, Label\r\n} from 'reactstrap'\r\nimport classnames from \"classnames\";\r\nimport CardHeader from 'reactstrap/lib/CardHeader';\r\nimport Axios from '../../../helpers/axiosConfig'\r\nimport {Redirect} from 'react-router-dom';\r\nimport SimpleModal from \"../components/SimpleModal\";\r\n\r\nconst Periodontogram = ({location}) => {\r\n    \r\n    const modalRef = useRef()\r\n    const setModal = (options) => {\r\n        modalRef.current.setModal(options);\r\n    };\r\n    \r\n    const [next, setNext] = useState(false)\r\n    const [periodontalDiagnosis, setPeriodontalDiagnosis] = useState(\"\")\r\n    const [odontologicalDiagnosis, setOdontologicalDiagnosis] = useState(\"\")\r\n    const [treatmentPlan, setTreatmentPlan] = useState(\"\")\r\n\r\n    //LOCATION###############################################################\r\n    useEffect(() => {\r\n        fetchFiles();\r\n    }, []);\r\n   \r\n    //FILE###################################################################\r\n    const [fileName, setFileName] = useState(\"\");\r\n    const [fileType, setFileType] = useState(\"\");\r\n    const [file, setFile] = useState({});\r\n    const [hasFile, setHasFile] = useState(false);\r\n    const [files, setFiles] =useState([]);\r\n    const extAllowed = \"pdf\";\r\n    const sizAllowed = 10000000;\r\n    const defaultHelpText = extAllowed + \" (max: \" + sizAllowed / 1000000 + \" MB)\";\r\n    const [helpText, setHelpText] =useState(defaultHelpText);\r\n\r\n    const handleHasFile = () => {\r\n        setHasFile(!hasFile);\r\n        cleanFile();\r\n        setHelpText(defaultHelpText);\r\n    };\r\n\r\n    const fetchFiles= async () => {\r\n        const res = await Axios.post(\"photo/odonto_geriatra/obtain\", {anamnId: location.state.anamId})\r\n        if (!res.data.error) {\r\n            setFiles(res.data.result);\r\n            setModal({});\r\n        };       \r\n    };\r\n\r\n    const loadFile = (file) => {\r\n        if (file[0]?.name) {\r\n            const size = file[0].size;\r\n            const full = file[0]?.name;\r\n            const type = full.slice((full.lastIndexOf('.') - 1 >>> 0) + 2).toLowerCase();\r\n            if (extAllowed.indexOf(type) >= 0) {\r\n                if (size <= sizAllowed) {\r\n                    setFileName(full.slice(0, (full.lastIndexOf('.'))));\r\n                    setFileType(type);\r\n                    setFile(file);\r\n                    setHelpText(full);\r\n                    return;\r\n                } else {\r\n                    cleanFile();\r\n                    setHelpText(\"Tamaño de archivo invalido\");\r\n                    return;\r\n                };\r\n            };\r\n            cleanFile();\r\n            setHelpText(\"Formato de archivo invalido\");\r\n        };\r\n    };\r\n\r\n    const cleanFile = () => {\r\n        setFileName(\"\");\r\n        setFileType(\"\");\r\n        setFile({});\r\n    };\r\n\r\n    const uploadFile = () => {\r\n        if (fileName) {\r\n            const f = new FormData();\r\n            f.append(\"file\", file[0], fileName + '.' + fileType);\r\n            Axios.post(\"file/img_odonto/\" + location.state.run, f)\r\n            .then(response => {\r\n                saveFile();\r\n            }).catch(error => {\r\n                console.log(error);\r\n            });\r\n        };\r\n    };\r\n\r\n    const saveFile = async () => {\r\n        const res = await Axios.post(\"photo/odonto_geriatra\",\r\n            {anamnId : location.state.anamId,\r\n            nombreImagen: fileName + '.' + fileType,\r\n            ruta: \"static/images_anam_odonto/\" + location.state.run}\r\n        );\r\n        if (!res.data.error) {\r\n            fetchFiles();\r\n            cleanFile();\r\n            setHelpText(defaultHelpText);\r\n            setHasFile(false);\r\n        }; \r\n    };    \r\n\r\n    const removeFile = async (fId, name) => {\r\n        const res = await Axios.post(\"photo/odonto_geriatra/rm/\", {\r\n            fId : fId,\r\n            route : location.state.run + '/' + name\r\n        });\r\n        if (!res.data.error) {\r\n            fetchFiles();\r\n        }; \r\n    };\r\n\r\n    const addDiagnosticos = async e => {\r\n        e.preventDefault()\r\n        const res = await Axios.post(\"geriatrical-odonto-anamnesis/periodontograma\",\r\n            {\r\n                anamId: location.state.anamId,\r\n                periodontalDiagnosis:periodontalDiagnosis,\r\n                odontologicalDiagnosis:odontologicalDiagnosis,\r\n                treatmentPlan:treatmentPlan\r\n            }\r\n        );\r\n\r\n        if (!res.data.error){\r\n            setNext(true);\r\n        };  \r\n    };\r\n   \r\n    return (\r\n        <Container>\r\n            <SimpleModal ref={modalRef}/>\r\n            <Card>\r\n                <CardBody>\r\n                <h3>{location.state.run}, {location.state.name} {location.state.apellido}</h3>\r\n                    <h1>\r\n                        Anamnesis Odonto-geriátrica \r\n                    </h1>\r\n                    <h6 className=\"heading-small text-muted mb-4\">\r\n                        Periodontograma\r\n                    </h6>\r\n                    <Form  onSubmit={addDiagnosticos} role=\"form\">\r\n                    <FormGroup className=\"row\">\r\n                        <Col>\r\n                            <Label className=\"form-control-label mb-3\">Periodontograma (<a href=\"https://sepa.es/periodontograma/index.html\" target=\"_blank\">Link a SEPA</a>)</Label>\r\n                        </Col>\r\n                    </FormGroup>\r\n                    <FormGroup className=\"row\">\r\n                        <Col md=\"6\">\r\n                            <Label className=\"form-control-label mb-3\">Archivos disponibles</Label>\r\n                            {files.map((file) => (\r\n                                <div key={file.foto_id} className=\"list-group mb-2\">\r\n                                    <InputGroup>\r\n                                        <Button className=\"mr-2\" color=\"danger\" size=\"sm\" outline onClick={() => setModal({title: 'Confirmación', text: 'Desea eliminar ' + file.foto_nombre + '?', type: 2, fx: () => removeFile(file.foto_id, file.foto_nombre)})}><i className=\"far fa-trash-alt\"/></Button>\r\n                                        <a rel=\"noopener noreferrer\" target=\"_blank\" href={process.env.REACT_APP_API_URL + `${file.url}` + \"/\" + `${file.foto_nombre}`}>{file.foto_nombre}</a>\r\n                                    </InputGroup>\r\n                                </div>\r\n                            ))}\r\n                        </Col>\r\n                        <Col md=\"6\">\r\n                            <Card>\r\n                                <CardHeader>\r\n                                    <FormGroup className=\"row\">\r\n                                        <Col className=\"d-flex\">\r\n                                            <Label className=\"form-control-label\">¿Subir periodontograma?</Label>\r\n                                            <label className=\"custom-toggle custom-toggle-info ml-3\">\r\n                                                <Input type=\"checkbox\" checked={hasFile} onChange={() => handleHasFile()}/>\r\n                                                <span className=\"custom-toggle-slider rounded-circle\" data-label-off=\"No\" data-label-on=\"Sí\"/>\r\n                                            </label>\r\n                                        </Col>\r\n                                    </FormGroup>\r\n                                </CardHeader>\r\n                                {hasFile &&\r\n                                    <CardBody>\r\n                                        <FormGroup>\r\n                                            <InputGroup>\r\n                                                <InputGroupAddon addonType=\"prepend\">\r\n                                                    <Button \r\n                                                        type=\"button\" color=\"primary\"\r\n                                                        onClick={() => uploadFile()}>\r\n                                                        Agregar \r\n                                                    </Button>\r\n                                                </InputGroupAddon>\r\n                                                <Input\r\n                                                    autoComplete=\"off\"\r\n                                                    type=\"text\"\r\n                                                    name=\"treatment_plan\"\r\n                                                    value={fileName}\r\n                                                    onChange={e => setFileName(e.target.value)}\r\n                                                />\r\n                                                <InputGroupAddon addonType=\"append\">\r\n                                                    <Button \r\n                                                        type=\"button\" color=\"primary\" \r\n                                                        onClick={() => {document.getElementById('files').click()}}>\r\n                                                        Buscar\r\n                                                    </Button>\r\n                                                </InputGroupAddon>\r\n                                            </InputGroup>\r\n                                            <h5 align=\"right\" style={{marginRight: \"10px\", marginBottom: \"0px\"}}>{helpText}</h5>\r\n                                            <input \r\n                                                type=\"file\" \r\n                                                accept=\"image/*, .pdf\"\r\n                                                id=\"files\" \r\n                                                style={{visibility: 'hidden'}} \r\n                                                onChange={e => loadFile(e.target.files)}\r\n                                            />\r\n                                        </FormGroup>\r\n                                    </CardBody>\r\n                                }\r\n                            </Card>\r\n                        </Col>\r\n                    </FormGroup>  \r\n                    <FormGroup className=\"row\">\r\n                            <Col>\r\n                                <Label\r\n                                    className=\"form-control-label\"\r\n                                >\r\n                                    Diagnostico periodontal\r\n                                </Label>\r\n\r\n                                <Input\r\n                                    defaultValue=\"\"\r\n                                    id=\"example-text-input\"\r\n                                    type=\"textarea\"\r\n                                    onChange={(e) => {\r\n                                        setPeriodontalDiagnosis(e.target.value)\r\n                                    }}\r\n                                />\r\n                            </Col>\r\n                        </FormGroup>\r\n                        <FormGroup className=\"row\">\r\n                            <Col>\r\n                                <Label\r\n                                    className=\"form-control-label\"\r\n                                >\r\n                                    Diagnostico Odontologico\r\n                                </Label>\r\n\r\n                                <Input\r\n                                    defaultValue=\"\"\r\n                                    id=\"example-text-input\"\r\n                                    type=\"textarea\"\r\n                                    onChange={(e) => {\r\n                                        setOdontologicalDiagnosis(e.target.value)\r\n                                    }}\r\n                                />\r\n                            </Col>\r\n                        </FormGroup>\r\n                        <FormGroup className=\"row\">\r\n                            <Col>\r\n                                <Label\r\n                                    className=\"form-control-label\"\r\n                                >\r\n                                    Plan de tratamiento\r\n                                </Label>\r\n\r\n                                <Input\r\n                                    defaultValue=\"\"\r\n                                    id=\"example-text-input\"\r\n                                    type=\"textarea\"\r\n                                    onChange={(e) => {\r\n                                        setTreatmentPlan(e.target.value)\r\n                                    }}\r\n                                />\r\n                            </Col>\r\n                        </FormGroup>\r\n                        <FormGroup className=\"row\">\r\n                            <Col md=\"10\">\r\n                               \r\n                            </Col>\r\n                            <Col md=\"2\">\r\n                           \r\n                              <Button type=\"submit\" color=\"primary\">Guardar</Button>\r\n                             \r\n                            </Col>\r\n                        </FormGroup>\r\n                    </Form> \r\n\r\n\r\n\r\n\r\n\r\n                    { next && <Redirect to={{\r\n                    pathname: \"/admin/list-patient-anamnesis\",\r\n                    state: { id: location.state.id, run: location.state.run, name: location.state.name, apellido : location.state.apellido, anamId:location.state.anamId, dentalAnamnesis:true} \r\n                    }} /> } \r\n                </CardBody>\r\n            </Card>\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default Periodontogram\r\n"]},"metadata":{},"sourceType":"module"}