{"ast":null,"code":"var naturalSort = require('string-natural-compare'),\n    getByClass = require('./utils/get-by-class'),\n    extend = require('./utils/extend'),\n    indexOf = require('./utils/index-of'),\n    events = require('./utils/events'),\n    toString = require('./utils/to-string'),\n    classes = require('./utils/classes'),\n    getAttribute = require('./utils/get-attribute'),\n    toArray = require('./utils/to-array');\n\nmodule.exports = function (id, options, values) {\n  var self = this,\n      init,\n      Item = require('./item')(self),\n      addAsync = require('./add-async')(self),\n      initPagination = require('./pagination')(self);\n\n  init = {\n    start: function start() {\n      self.listClass = \"list\";\n      self.searchClass = \"search\";\n      self.sortClass = \"sort\";\n      self.page = 10000;\n      self.i = 1;\n      self.items = [];\n      self.visibleItems = [];\n      self.matchingItems = [];\n      self.searched = false;\n      self.filtered = false;\n      self.searchColumns = undefined;\n      self.handlers = {\n        'updated': []\n      };\n      self.valueNames = [];\n      self.utils = {\n        getByClass: getByClass,\n        extend: extend,\n        indexOf: indexOf,\n        events: events,\n        toString: toString,\n        naturalSort: naturalSort,\n        classes: classes,\n        getAttribute: getAttribute,\n        toArray: toArray\n      };\n      self.utils.extend(self, options);\n      self.listContainer = typeof id === 'string' ? document.getElementById(id) : id;\n\n      if (!self.listContainer) {\n        return;\n      }\n\n      self.list = getByClass(self.listContainer, self.listClass, true);\n      self.parse = require('./parse')(self);\n      self.templater = require('./templater')(self);\n      self.search = require('./search')(self);\n      self.filter = require('./filter')(self);\n      self.sort = require('./sort')(self);\n      self.fuzzySearch = require('./fuzzy-search')(self, options.fuzzySearch);\n      this.handlers();\n      this.items();\n      this.pagination();\n      self.update();\n    },\n    handlers: function handlers() {\n      for (var handler in self.handlers) {\n        if (self[handler]) {\n          self.on(handler, self[handler]);\n        }\n      }\n    },\n    items: function items() {\n      self.parse(self.list);\n\n      if (values !== undefined) {\n        self.add(values);\n      }\n    },\n    pagination: function pagination() {\n      if (options.pagination !== undefined) {\n        if (options.pagination === true) {\n          options.pagination = [{}];\n        }\n\n        if (options.pagination[0] === undefined) {\n          options.pagination = [options.pagination];\n        }\n\n        for (var i = 0, il = options.pagination.length; i < il; i++) {\n          initPagination(options.pagination[i]);\n        }\n      }\n    }\n  };\n  /*\n  * Re-parse the List, use if html have changed\n  */\n\n  this.reIndex = function () {\n    self.items = [];\n    self.visibleItems = [];\n    self.matchingItems = [];\n    self.searched = false;\n    self.filtered = false;\n    self.parse(self.list);\n  };\n\n  this.toJSON = function () {\n    var json = [];\n\n    for (var i = 0, il = self.items.length; i < il; i++) {\n      json.push(self.items[i].values());\n    }\n\n    return json;\n  };\n  /*\n  * Add object to list\n  */\n\n\n  this.add = function (values, callback) {\n    if (values.length === 0) {\n      return;\n    }\n\n    if (callback) {\n      addAsync(values, callback);\n      return;\n    }\n\n    var added = [],\n        notCreate = false;\n\n    if (values[0] === undefined) {\n      values = [values];\n    }\n\n    for (var i = 0, il = values.length; i < il; i++) {\n      var item = null;\n      notCreate = self.items.length > self.page ? true : false;\n      item = new Item(values[i], undefined, notCreate);\n      self.items.push(item);\n      added.push(item);\n    }\n\n    self.update();\n    return added;\n  };\n\n  this.show = function (i, page) {\n    this.i = i;\n    this.page = page;\n    self.update();\n    return self;\n  };\n  /* Removes object from list.\n  * Loops through the list and removes objects where\n  * property \"valuename\" === value\n  */\n\n\n  this.remove = function (valueName, value, options) {\n    var found = 0;\n\n    for (var i = 0, il = self.items.length; i < il; i++) {\n      if (self.items[i].values()[valueName] == value) {\n        self.templater.remove(self.items[i], options);\n        self.items.splice(i, 1);\n        il--;\n        i--;\n        found++;\n      }\n    }\n\n    self.update();\n    return found;\n  };\n  /* Gets the objects in the list which\n  * property \"valueName\" === value\n  */\n\n\n  this.get = function (valueName, value) {\n    var matchedItems = [];\n\n    for (var i = 0, il = self.items.length; i < il; i++) {\n      var item = self.items[i];\n\n      if (item.values()[valueName] == value) {\n        matchedItems.push(item);\n      }\n    }\n\n    return matchedItems;\n  };\n  /*\n  * Get size of the list\n  */\n\n\n  this.size = function () {\n    return self.items.length;\n  };\n  /*\n  * Removes all items from the list\n  */\n\n\n  this.clear = function () {\n    self.templater.clear();\n    self.items = [];\n    return self;\n  };\n\n  this.on = function (event, callback) {\n    self.handlers[event].push(callback);\n    return self;\n  };\n\n  this.off = function (event, callback) {\n    var e = self.handlers[event];\n    var index = indexOf(e, callback);\n\n    if (index > -1) {\n      e.splice(index, 1);\n    }\n\n    return self;\n  };\n\n  this.trigger = function (event) {\n    var i = self.handlers[event].length;\n\n    while (i--) {\n      self.handlers[event][i](self);\n    }\n\n    return self;\n  };\n\n  this.reset = {\n    filter: function filter() {\n      var is = self.items,\n          il = is.length;\n\n      while (il--) {\n        is[il].filtered = false;\n      }\n\n      return self;\n    },\n    search: function search() {\n      var is = self.items,\n          il = is.length;\n\n      while (il--) {\n        is[il].found = false;\n      }\n\n      return self;\n    }\n  };\n\n  this.update = function () {\n    var is = self.items,\n        il = is.length;\n    self.visibleItems = [];\n    self.matchingItems = [];\n    self.templater.clear();\n\n    for (var i = 0; i < il; i++) {\n      if (is[i].matching() && self.matchingItems.length + 1 >= self.i && self.visibleItems.length < self.page) {\n        is[i].show();\n        self.visibleItems.push(is[i]);\n        self.matchingItems.push(is[i]);\n      } else if (is[i].matching()) {\n        self.matchingItems.push(is[i]);\n        is[i].hide();\n      } else {\n        is[i].hide();\n      }\n    }\n\n    self.trigger('updated');\n    return self;\n  };\n\n  init.start();\n};","map":{"version":3,"sources":["C:/Users/Christian/WebstormProjects/teleodontoweb/node_modules/list.js/src/index.js"],"names":["naturalSort","require","getByClass","extend","indexOf","events","toString","classes","getAttribute","toArray","module","exports","id","options","values","self","init","Item","addAsync","initPagination","start","listClass","searchClass","sortClass","page","i","items","visibleItems","matchingItems","searched","filtered","searchColumns","undefined","handlers","valueNames","utils","listContainer","document","getElementById","list","parse","templater","search","filter","sort","fuzzySearch","pagination","update","handler","on","add","il","length","reIndex","toJSON","json","push","callback","added","notCreate","item","show","remove","valueName","value","found","splice","get","matchedItems","size","clear","event","off","e","index","trigger","reset","is","matching","hide"],"mappings":"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","sourcesContent":["var naturalSort = require('string-natural-compare'),\n  getByClass = require('./utils/get-by-class'),\n  extend = require('./utils/extend'),\n  indexOf = require('./utils/index-of'),\n  events = require('./utils/events'),\n  toString = require('./utils/to-string'),\n  classes = require('./utils/classes'),\n  getAttribute = require('./utils/get-attribute'),\n  toArray = require('./utils/to-array');\n\nmodule.exports = function(id, options, values) {\n\n  var self = this,\n    init,\n    Item = require('./item')(self),\n    addAsync = require('./add-async')(self),\n    initPagination = require('./pagination')(self);\n\n  init = {\n    start: function() {\n      self.listClass      = \"list\";\n      self.searchClass    = \"search\";\n      self.sortClass      = \"sort\";\n      self.page           = 10000;\n      self.i              = 1;\n      self.items          = [];\n      self.visibleItems   = [];\n      self.matchingItems  = [];\n      self.searched       = false;\n      self.filtered       = false;\n      self.searchColumns  = undefined;\n      self.handlers       = { 'updated': [] };\n      self.valueNames     = [];\n      self.utils          = {\n        getByClass: getByClass,\n        extend: extend,\n        indexOf: indexOf,\n        events: events,\n        toString: toString,\n        naturalSort: naturalSort,\n        classes: classes,\n        getAttribute: getAttribute,\n        toArray: toArray\n      };\n\n      self.utils.extend(self, options);\n\n      self.listContainer = (typeof(id) === 'string') ? document.getElementById(id) : id;\n      if (!self.listContainer) { return; }\n      self.list       = getByClass(self.listContainer, self.listClass, true);\n\n      self.parse        = require('./parse')(self);\n      self.templater    = require('./templater')(self);\n      self.search       = require('./search')(self);\n      self.filter       = require('./filter')(self);\n      self.sort         = require('./sort')(self);\n      self.fuzzySearch  = require('./fuzzy-search')(self, options.fuzzySearch);\n\n      this.handlers();\n      this.items();\n      this.pagination();\n\n      self.update();\n    },\n    handlers: function() {\n      for (var handler in self.handlers) {\n        if (self[handler]) {\n          self.on(handler, self[handler]);\n        }\n      }\n    },\n    items: function() {\n      self.parse(self.list);\n      if (values !== undefined) {\n        self.add(values);\n      }\n    },\n    pagination: function() {\n      if (options.pagination !== undefined) {\n        if (options.pagination === true) {\n          options.pagination = [{}];\n        }\n        if (options.pagination[0] === undefined){\n          options.pagination = [options.pagination];\n        }\n        for (var i = 0, il = options.pagination.length; i < il; i++) {\n          initPagination(options.pagination[i]);\n        }\n      }\n    }\n  };\n\n  /*\n  * Re-parse the List, use if html have changed\n  */\n  this.reIndex = function() {\n    self.items          = [];\n    self.visibleItems   = [];\n    self.matchingItems  = [];\n    self.searched       = false;\n    self.filtered       = false;\n    self.parse(self.list);\n  };\n\n  this.toJSON = function() {\n    var json = [];\n    for (var i = 0, il = self.items.length; i < il; i++) {\n      json.push(self.items[i].values());\n    }\n    return json;\n  };\n\n\n  /*\n  * Add object to list\n  */\n  this.add = function(values, callback) {\n    if (values.length === 0) {\n      return;\n    }\n    if (callback) {\n      addAsync(values, callback);\n      return;\n    }\n    var added = [],\n      notCreate = false;\n    if (values[0] === undefined){\n      values = [values];\n    }\n    for (var i = 0, il = values.length; i < il; i++) {\n      var item = null;\n      notCreate = (self.items.length > self.page) ? true : false;\n      item = new Item(values[i], undefined, notCreate);\n      self.items.push(item);\n      added.push(item);\n    }\n    self.update();\n    return added;\n  };\n\n\tthis.show = function(i, page) {\n\t\tthis.i = i;\n\t\tthis.page = page;\n\t\tself.update();\n    return self;\n\t};\n\n  /* Removes object from list.\n  * Loops through the list and removes objects where\n  * property \"valuename\" === value\n  */\n  this.remove = function(valueName, value, options) {\n    var found = 0;\n    for (var i = 0, il = self.items.length; i < il; i++) {\n      if (self.items[i].values()[valueName] == value) {\n        self.templater.remove(self.items[i], options);\n        self.items.splice(i,1);\n        il--;\n        i--;\n        found++;\n      }\n    }\n    self.update();\n    return found;\n  };\n\n  /* Gets the objects in the list which\n  * property \"valueName\" === value\n  */\n  this.get = function(valueName, value) {\n    var matchedItems = [];\n    for (var i = 0, il = self.items.length; i < il; i++) {\n      var item = self.items[i];\n      if (item.values()[valueName] == value) {\n        matchedItems.push(item);\n      }\n    }\n    return matchedItems;\n  };\n\n  /*\n  * Get size of the list\n  */\n  this.size = function() {\n    return self.items.length;\n  };\n\n  /*\n  * Removes all items from the list\n  */\n  this.clear = function() {\n    self.templater.clear();\n    self.items = [];\n    return self;\n  };\n\n  this.on = function(event, callback) {\n    self.handlers[event].push(callback);\n    return self;\n  };\n\n  this.off = function(event, callback) {\n    var e = self.handlers[event];\n    var index = indexOf(e, callback);\n    if (index > -1) {\n      e.splice(index, 1);\n    }\n    return self;\n  };\n\n  this.trigger = function(event) {\n    var i = self.handlers[event].length;\n    while(i--) {\n      self.handlers[event][i](self);\n    }\n    return self;\n  };\n\n  this.reset = {\n    filter: function() {\n      var is = self.items,\n        il = is.length;\n      while (il--) {\n        is[il].filtered = false;\n      }\n      return self;\n    },\n    search: function() {\n      var is = self.items,\n        il = is.length;\n      while (il--) {\n        is[il].found = false;\n      }\n      return self;\n    }\n  };\n\n  this.update = function() {\n    var is = self.items,\n\t\t\til = is.length;\n\n    self.visibleItems = [];\n    self.matchingItems = [];\n    self.templater.clear();\n    for (var i = 0; i < il; i++) {\n      if (is[i].matching() && ((self.matchingItems.length+1) >= self.i && self.visibleItems.length < self.page)) {\n        is[i].show();\n        self.visibleItems.push(is[i]);\n        self.matchingItems.push(is[i]);\n      } else if (is[i].matching()) {\n        self.matchingItems.push(is[i]);\n        is[i].hide();\n      } else {\n        is[i].hide();\n      }\n    }\n    self.trigger('updated');\n    return self;\n  };\n\n  init.start();\n};\n"]},"metadata":{},"sourceType":"script"}