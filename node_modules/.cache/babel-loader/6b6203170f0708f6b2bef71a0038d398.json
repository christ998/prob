{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\Christian\\\\WebstormProjects\\\\teleodontoweb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Christian\\\\WebstormProjects\\\\teleodontoweb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"C:\\\\Users\\\\Christian\\\\WebstormProjects\\\\teleodontoweb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"C:\\\\Users\\\\Christian\\\\WebstormProjects\\\\teleodontoweb\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\Christian\\\\WebstormProjects\\\\teleodontoweb\\\\src\\\\views\\\\pages\\\\patient\\\\register-user.js\";\n\nimport React, { useState, useRef } from 'react';\nimport { Button, Col, Container, Form, FormGroup, Input, Card, CardBody, Label } from 'reactstrap';\nimport Axios from '../../../helpers/axiosConfig';\nimport useList from 'hooks/useList';\nimport SimpleModal from \"../components/SimpleModal\";\n\nvar RegisterUser = function RegisterUser() {\n  var types = useList(\"list/user-type\");\n\n  var _useState = useState({\n    email: \"\"\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  var modalRef = useRef();\n\n  var setModal = function setModal(options) {\n    modalRef.current.setModal(options);\n  };\n\n  var handleInputChange = function handleInputChange(e) {\n    setUser(_objectSpread(_objectSpread({}, user), {}, {\n      [e.target.name]: e.target.value\n    }));\n  };\n\n  var resetForm = function resetForm() {\n    document.getElementById(\"main-form\").reset();\n    setUser({});\n    setModal({});\n  };\n\n  var addUser = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              _context.prev = 1;\n              _context.next = 4;\n              return Axios.post(\"user\", {\n                user_id: 0,\n                run: user.run,\n                names: user.names,\n                lastnames: user.paternal_last_name + \" \" + user.maternal_last_name,\n                user_type_id: user.user_type_id,\n                email: user.email\n              });\n\n            case 4:\n              res = _context.sent;\n              _context.t0 = res.data.result[0][0].cod;\n              _context.next = _context.t0 === 0 ? 8 : _context.t0 === 1 ? 10 : _context.t0 === 2 ? 12 : 14;\n              break;\n\n            case 8:\n              //setModal({title: 'Usuario', text : 'Usuario ' + user.run + ' registrado correctamente!', type: 1});\n              resetForm();\n              return _context.abrupt(\"break\", 16);\n\n            case 10:\n              setModal({\n                title: 'Usuario',\n                text: 'El usuario ' + user.run + ' ya existe.',\n                type: 1\n              });\n              return _context.abrupt(\"break\", 16);\n\n            case 12:\n              setModal({\n                title: 'Usuario',\n                text: 'El usuario ' + user.run + ' ya existe pero esta inactivo. ¿Desea activarlo?',\n                type: 2,\n                fx: updateStateUser\n              });\n              return _context.abrupt(\"break\", 16);\n\n            case 14:\n              setModal({\n                title: 'Error',\n                text: 'Despierte al administrador de sistemas' + res.data.result[0][0].msg,\n                type: 1\n              });\n              return _context.abrupt(\"break\", 16);\n\n            case 16:\n              ;\n              _context.next = 22;\n              break;\n\n            case 19:\n              _context.prev = 19;\n              _context.t1 = _context[\"catch\"](1);\n              console.log('Err: ' + _context.t1);\n\n            case 22:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 19]]);\n    }));\n\n    return function addUser(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var updateStateUser = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return Axios.put(\"user/\" + user.run);\n\n            case 2:\n              res = _context2.sent;\n\n              if (!res.data.error) {\n                //handleModal({title: 'Usuario', text : 'Usuario ' + user.run + ' activado exitosamente!', type: 1});\n                resetForm();\n              }\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function updateStateUser() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var reqTag = /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: \"#DC3545\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 20\n    }\n  }, \"*\");\n  return /*#__PURE__*/React.createElement(Container, {\n    className: \"mt-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(SimpleModal, {\n    ref: modalRef,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Card, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CardBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 21\n    }\n  }, \"Usuario\"), /*#__PURE__*/React.createElement(\"h5\", {\n    style: {\n      color: \"#DC3545\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 21\n    }\n  }, \"* Existen campos obligatorios\"), /*#__PURE__*/React.createElement(Form, {\n    onSubmit: addUser,\n    role: \"form\",\n    id: \"main-form\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(FormGroup, {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    className: \"form-control-label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 29\n    }\n  }, \"Nombres \", reqTag), /*#__PURE__*/React.createElement(Input, {\n    autoComplete: \"off\",\n    placeholder: \"Alberto Alfredo\",\n    type: \"text\",\n    name: \"names\",\n    onChange: function onChange(e) {\n      return handleInputChange(e);\n    },\n    required: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 33\n    }\n  }))), /*#__PURE__*/React.createElement(FormGroup, {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    className: \"form-control-label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 29\n    }\n  }, \"Apellido paterno \", reqTag), /*#__PURE__*/React.createElement(Input, {\n    autoComplete: \"off\",\n    placeholder: \"Lamadrid\",\n    type: \"text\",\n    name: \"paternal_last_name\",\n    onChange: function onChange(e) {\n      return handleInputChange(e);\n    },\n    required: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 33\n    }\n  }))), /*#__PURE__*/React.createElement(FormGroup, {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    className: \"form-control-label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 29\n    }\n  }, \"Apellido materno \", reqTag), /*#__PURE__*/React.createElement(Input, {\n    autoComplete: \"off\",\n    placeholder: \"P\\xE9rez\",\n    type: \"text\",\n    name: \"maternal_last_name\",\n    onChange: function onChange(e) {\n      return handleInputChange(e);\n    },\n    required: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 33\n    }\n  }))), /*#__PURE__*/React.createElement(FormGroup, {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    className: \"form-control-label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 29\n    }\n  }, \"N\\xFAmero de Identidad (Sin puntos y con gui\\xF3n) \", reqTag), /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"12345678-9\",\n    autoComplete: \"off\",\n    type: \"text\",\n    name: \"run\",\n    onChange: function onChange(e) {\n      return handleInputChange(e);\n    },\n    required: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 33\n    }\n  }))), /*#__PURE__*/React.createElement(FormGroup, {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    className: \"form-control-label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 29\n    }\n  }, \"Rol \", reqTag), /*#__PURE__*/React.createElement(Input, {\n    type: \"select\",\n    name: \"user_type_id\",\n    required: true,\n    onChange: function onChange(e) {\n      return handleInputChange(e);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    hidden: true,\n    value: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 41\n    }\n  }, \"Seleccione...\"), types.map(function (e) {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: e.user_type_id,\n      value: e.user_type_id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 57\n      }\n    }, e.name);\n  })))), /*#__PURE__*/React.createElement(FormGroup, {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Label, {\n    className: \"form-control-label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 29\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(Input, {\n    autoComplete: \"off\",\n    placeholder: \"correo@dominio.cl\",\n    type: \"email\",\n    name: \"email\",\n    onChange: function onChange(e) {\n      return handleInputChange(e);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 33\n    }\n  }))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    className: \"float-right\",\n    type: \"submit\",\n    color: \"primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 25\n    }\n  }, \"Registrar Usuario\")))));\n};\n\nexport default RegisterUser;","map":{"version":3,"sources":["C:/Users/Christian/WebstormProjects/teleodontoweb/src/views/pages/patient/register-user.js"],"names":["React","useState","useRef","Button","Col","Container","Form","FormGroup","Input","Card","CardBody","Label","Axios","useList","SimpleModal","RegisterUser","types","email","user","setUser","modalRef","setModal","options","current","handleInputChange","e","target","name","value","resetForm","document","getElementById","reset","addUser","preventDefault","post","user_id","run","names","lastnames","paternal_last_name","maternal_last_name","user_type_id","res","data","result","cod","title","text","type","fx","updateStateUser","msg","console","log","put","error","reqTag","color","map"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from 'react'\r\nimport {Button, Col, Container, Form, FormGroup, Input, Card, CardBody, Label} from 'reactstrap'\r\nimport Axios from '../../../helpers/axiosConfig'\r\nimport useList from 'hooks/useList';\r\nimport SimpleModal from \"../components/SimpleModal\";\r\n\r\nconst RegisterUser = () => {                          \r\n    const types = useList(\"list/user-type\")  \r\n    const [user, setUser] = useState({email: \"\"});\r\n    \r\n    const modalRef = useRef()\r\n    const setModal = (options) => {\r\n        modalRef.current.setModal(options)\r\n    };\r\n\r\n    const handleInputChange = e => {\r\n        setUser({\r\n            ...user,\r\n            [e.target.name]: e.target.value\r\n        });\r\n    };\r\n\r\n    const resetForm = () => {\r\n        document.getElementById(\"main-form\").reset();\r\n        setUser({});\r\n        setModal({}); \r\n    }\r\n\r\n    const addUser = async e => {\r\n        e.preventDefault()\r\n        try {\r\n            const res = await Axios.post(\"user\", {\r\n                user_id: 0,\r\n                run: user.run,\r\n                names: user.names,\r\n                lastnames: user.paternal_last_name + \" \" + user.maternal_last_name,\r\n                user_type_id: user.user_type_id,\r\n                email: user.email\r\n            });\r\n\r\n            switch(res.data.result[0][0].cod) {\r\n                case 0: \r\n                    //setModal({title: 'Usuario', text : 'Usuario ' + user.run + ' registrado correctamente!', type: 1});\r\n                    resetForm();\r\n                    break;\r\n                case 1: \r\n                    setModal({title: 'Usuario', text : 'El usuario ' + user.run + ' ya existe.', type: 1});\r\n                    break;\r\n                case 2: \r\n                    setModal({title: 'Usuario', text : 'El usuario ' + user.run + ' ya existe pero esta inactivo. ¿Desea activarlo?', type: 2, fx: updateStateUser});\r\n                    break;\r\n                default:\r\n                    setModal({title: 'Error', text : 'Despierte al administrador de sistemas' + res.data.result[0][0].msg, type: 1});\r\n                    break;\r\n              };\r\n        } catch(e) {\r\n            console.log('Err: ' + e);\r\n        }\r\n    }\r\n\r\n    const updateStateUser = async () => {\r\n        const res = await Axios.put(\"user/\" + user.run)\r\n        if (!res.data.error) {\r\n            //handleModal({title: 'Usuario', text : 'Usuario ' + user.run + ' activado exitosamente!', type: 1});\r\n            resetForm();\r\n        }\r\n    }\r\n\r\n    const reqTag = <span style={{color:\"#DC3545\"}}>*</span>\r\n\r\n    return (\r\n        <Container className=\"mt-3\">\r\n            <SimpleModal ref={modalRef}/>\r\n            <Card>\r\n                <CardBody>\r\n                    <h1>Usuario</h1>\r\n                    <h5 style={{color:\"#DC3545\"}}>* Existen campos obligatorios</h5>\r\n                    <Form onSubmit={addUser} role=\"form\" id=\"main-form\">\r\n                        <FormGroup className=\"row\">\r\n                            <Col>\r\n                            <Label className=\"form-control-label\">Nombres {reqTag}</Label>\r\n                                <Input\r\n                                    autoComplete=\"off\"\r\n                                    placeholder=\"Alberto Alfredo\"\r\n                                    type=\"text\"\r\n                                    name=\"names\"\r\n                                    onChange={e => handleInputChange(e)}\r\n                                    required\r\n                                />\r\n                            </Col>\r\n                        </FormGroup>\r\n                        <FormGroup className=\"row\">\r\n                            <Col>\r\n                            <Label className=\"form-control-label\">Apellido paterno {reqTag}</Label>\r\n                                <Input\r\n                                    autoComplete=\"off\"\r\n                                    placeholder=\"Lamadrid\"\r\n                                    type=\"text\"\r\n                                    name=\"paternal_last_name\"\r\n                                    onChange={e => handleInputChange(e)}\r\n                                    required\r\n                                />\r\n                            </Col>\r\n                        </FormGroup>\r\n                        <FormGroup className=\"row\">\r\n                            <Col>\r\n                            <Label className=\"form-control-label\">Apellido materno {reqTag}</Label>\r\n                                <Input\r\n                                    autoComplete=\"off\"\r\n                                    placeholder=\"Pérez\"\r\n                                    type=\"text\"\r\n                                    name=\"maternal_last_name\"\r\n                                    onChange={e => handleInputChange(e)}\r\n                                    required\r\n                                />\r\n                            </Col>\r\n                        </FormGroup>\r\n                        <FormGroup className=\"row\">\r\n                            <Col>\r\n                            <Label className=\"form-control-label\">Número de Identidad (Sin puntos y con guión) {reqTag}</Label>\r\n                                <Input\r\n                                    placeholder=\"12345678-9\"\r\n                                    autoComplete=\"off\"\r\n                                    type=\"text\"\r\n                                    name=\"run\"\r\n                                    onChange={e => handleInputChange(e)}\r\n                                    required\r\n                                />\r\n                            </Col>\r\n                        </FormGroup>\r\n                        <FormGroup className=\"row\">\r\n                            <Col>\r\n                            <Label className=\"form-control-label\">Rol {reqTag}</Label>\r\n                                <Input \r\n                                    type=\"select\"\r\n                                    name=\"user_type_id\"\r\n                                    required\r\n                                    onChange={e => handleInputChange(e)}>\r\n                                        <option hidden value=\"\">Seleccione...</option>\r\n                                        {types.map(e=> (<option key={e.user_type_id} value={e.user_type_id}>{e.name}</option>))}\r\n                                </Input>\r\n                            </Col> \r\n                        </FormGroup>\r\n                        <FormGroup className=\"row\">\r\n                            <Col>\r\n                            <Label className=\"form-control-label\">Email</Label>\r\n                                <Input\r\n                                    autoComplete=\"off\"\r\n                                    placeholder=\"correo@dominio.cl\"\r\n                                    type=\"email\"\r\n                                    name=\"email\"\r\n                                    onChange={e => handleInputChange(e)}\r\n                                />\r\n                            </Col>\r\n                        </FormGroup> \r\n                        <br></br>\r\n                        <Button className= \"float-right\" type=\"submit\" color=\"primary\">Registrar Usuario</Button>\r\n                    </Form>\r\n                </CardBody>\r\n            </Card>\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default RegisterUser"]},"metadata":{},"sourceType":"module"}