{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Christian\\\\Desktop\\\\tele\\\\Nueva carpeta\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Christian\\\\Desktop\\\\tele\\\\Nueva carpeta\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\Christian\\\\Desktop\\\\tele\\\\Nueva carpeta\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import Axios from'../../../helpers/axiosConfig';import AuthHelper from'helpers/AuthHelper';import{getList}from'helpers/ListHelper';import useList from'hooks/useList';import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import{Button,Col,Container,Form,FormGroup,Input,Row,InputGroup,InputGroupText,InputGroupAddon,Card,CardBody,Table,UncontrolledTooltip,UncontrolledPopover,PopoverBody,CardHeader}from'reactstrap';import Label from'reactstrap/lib/Label';var FileView=function FileView(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),fileInfo=_useState2[0],setFileInfo=_useState2[1];useEffect(function(){fileById();},[]);var openFile=function openFile(url){var win=window.open(process.env.REACT_APP_API_URL+\"static/\"+url,'_blank');win.focus();};var fileById=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _res$data$result;var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Axios.get(\"review/file/\"+props.id);case 2:res=_context.sent;if((_res$data$result=res.data.result)===null||_res$data$result===void 0?void 0:_res$data$result.length){setFileInfo(res.data.result[0]);}case 4:case\"end\":return _context.stop();}}},_callee);}));return function fileById(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",null,fileInfo&&/*#__PURE__*/React.createElement(Button,{outline:true,color:\"info\",onClick:function onClick(){openFile(fileInfo.url);}},fileInfo.name));};var Reviews=function Reviews(props){var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),revText=_useState4[0],setRevText=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),file=_useState6[0],setFile=_useState6[1];var reviewTypes=useList('review/types');var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),reviews=_useState8[0],setReviews=_useState8[1];var _useState9=useState(\"-1\"),_useState10=_slicedToArray(_useState9,2),selectedFilter=_useState10[0],setSelectedFilter=_useState10[1];var _useState11=useState(-1),_useState12=_slicedToArray(_useState11,2),rtId=_useState12[0],setRtId=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),fileWillPost=_useState14[0],setFileWillPost=_useState14[1];useEffect(function(){fetchReviews();},[]);var rut=props.rut;var fetchReviews=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getList(\"review/get/\"+props.id);case 2:res=_context2.sent;setReviews(res);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchReviews(){return _ref2.apply(this,arguments);};}();var handleFileChange=function handleFileChange(e){setFile(e.target.files[0]);};var resetFile=function resetFile(){setFile(null);};var postReview=function postReview(e){e.preventDefault();if(fileWillPost&&file){withFile();}else{noFile();}};var noFile=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return Axios.post(\"review\",{personId:props.id,/* Id del paciente en atención */userId:AuthHelper.getUserId(),/* Id del usuario en sesión */reviewTypeId:rtId,description:revText});case 2:res=_context3.sent;if(!res.data.error){fetchReviews();setRevText(\"\");}case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function noFile(){return _ref3.apply(this,arguments);};}();var withFile=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var res,f;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return Axios.post(\"review/file/\",{personId:props.id,/* Id del paciente en atención */userId:AuthHelper.getUserId(),/* Id del usuario en sesión */reviewTypeId:rtId,description:revText,url:rut+\"/\"+file.name,fileName:file.name});case 2:res=_context4.sent;if(res.data.error){_context4.next=10;break;}f=new FormData();f.append(\"file\",file,file.name);_context4.next=8;return Axios.post(\"file/review/\"+rut,f).then(function(response){console.log(response);resetFile();setFileWillPost(false);}).catch(function(error){console.log(error);});case 8:fetchReviews();setRevText(\"\");case 10:case\"end\":return _context4.stop();}}},_callee4);}));return function withFile(){return _ref4.apply(this,arguments);};}();var reviewType=function reviewType(rTypeId){var _rt$;var rt=reviewTypes.filter(function(rt){return rt.id===rTypeId;});return(_rt$=rt[0])===null||_rt$===void 0?void 0:_rt$.name;};var filterRevs=function filterRevs(){return selectedFilter===\"-1\"?reviews:reviews.filter(function(rev){return String(rev.review_type_id)===selectedFilter;});};return!reviewTypes?/*#__PURE__*/React.createElement(\"div\",null):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"Filtros:\",\"  \"),/*#__PURE__*/React.createElement(FormGroup,{check:true,inline:true},/*#__PURE__*/React.createElement(Label,{check:true},/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",value:\"-1\",checked:selectedFilter===\"-1\",onChange:function onChange(e){return setSelectedFilter(e.target.value);}}),\" Todos\")),reviewTypes.map(function(rt){return/*#__PURE__*/React.createElement(FormGroup,{check:true,inline:true,key:rt.id},/*#__PURE__*/React.createElement(Label,{check:true},/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",value:rt.id,checked:selectedFilter==rt.id,onChange:function onChange(e){return setSelectedFilter(e.target.value);}}),\" \",rt.name));}),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"timeline timeline-one-side\",\"data-timeline-axis-style\":\"none\",\"data-timeline-content\":\"axis\",style:{overflow:'scroll',height:'450px'}},filterRevs().map(function(rev){return/*#__PURE__*/React.createElement(\"div\",{key:rev.review_id,className:\"timeline-block\"},/*#__PURE__*/React.createElement(\"span\",{className:\"timeline-step\"},/*#__PURE__*/React.createElement(\"small\",{className:\"text-muted font-weight-bold\",id:\"rev_date\"},rev.c_time,/*#__PURE__*/React.createElement(\"br\",null),rev.c_date),/*#__PURE__*/React.createElement(UncontrolledTooltip,{target:\"rev_date\"},rev.c_date,\"/\",rev.c_year)),/*#__PURE__*/React.createElement(\"div\",{className:\"timeline-content\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"mt-2 mb-0\"},rev.names,\" en \",reviewType(rev.review_type_id)),/*#__PURE__*/React.createElement(\"p\",{className:\"text-sm mt-1 mb-0\"},rev.description),Boolean(rev.has_file)&&/*#__PURE__*/React.createElement(FileView,{id:rev.review_id})));})),/*#__PURE__*/React.createElement(Form,{onSubmit:postReview},rtId==4&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"br\",null),\"Revise la plantilla principal de recetas \",/*#__PURE__*/React.createElement(\"a\",{target:\"_blank\",without:true,rel:\"noopener noreferrer\",href:\"https://drive.google.com/drive/u/4/folders/1QyKDDUkRrbq4DIaseKIuaoba9XraAA96\"},\"aqu\\xED\")),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(FormGroup,{className:\"row\"},/*#__PURE__*/React.createElement(Label,{className:\"form-control-label pt-3\",md:\"2\"},/*#__PURE__*/React.createElement(\"b\",null,\"Tipo de comentario\")),/*#__PURE__*/React.createElement(Col,{md:\"10\"},/*#__PURE__*/React.createElement(Input,{type:\"select\",onChange:function onChange(e){setRtId(e.target.value);},required:true},/*#__PURE__*/React.createElement(\"option\",{hidden:true,value:-1},\"(Seleccione)\"),reviewTypes.map(function(rt){return/*#__PURE__*/React.createElement(\"option\",{key:rt.id,value:rt.id},rt.name);})))),/*#__PURE__*/React.createElement(FormGroup,{className:\"row\"},/*#__PURE__*/React.createElement(Label,{md:\"3\"},\"Adjuntar archivo?\",\" \",/*#__PURE__*/React.createElement(\"label\",{className:\"custom-toggle custom-toggle-info mr-1\"},/*#__PURE__*/React.createElement(Input,{type:\"checkbox\",checked:fileWillPost,onChange:function onChange(){setFileWillPost(!fileWillPost);}}),/*#__PURE__*/React.createElement(\"span\",{className:\"custom-toggle-slider rounded-circle\",\"data-label-off\":\"No\",\"data-label-on\":\"S\\xED\"}))),/*#__PURE__*/React.createElement(Col,{md:\"9\"},fileWillPost&&/*#__PURE__*/React.createElement(InputGroup,null,/*#__PURE__*/React.createElement(Input,{autoComplete:\"off\",type:\"text\",name:\"treatment_plan\",readOnly:true,placeholder:\"Elija archivo\",value:file?file.name:\"\"}),/*#__PURE__*/React.createElement(InputGroupAddon,{addonType:\"append\"},file?/*#__PURE__*/React.createElement(Button,{type:\"button\",color:\"danger\",onClick:resetFile},\"Deshacer\"):/*#__PURE__*/React.createElement(Button,{type:\"button\",color:\"info\",onClick:function onClick(){document.getElementById('rFile').click();}},\"Elegir archivo\"))),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",id:\"rFile\",style:{visibility:'hidden'},onChange:handleFileChange,required:fileWillPost}))),/*#__PURE__*/React.createElement(InputGroup,null,/*#__PURE__*/React.createElement(Input,{type:\"textarea\",value:revText,onChange:function onChange(e){setRevText(e.target.value);},placeholder:\"Escriba aqu\\xED su comentario\",required:!fileWillPost}),/*#__PURE__*/React.createElement(Button,{color:\"primary\",disabled:rtId==-1,type:\"submit\"},\"Subir\"))));};var ClinicalRecord=function ClinicalRecord(_ref5){var _location$state,_location$state6,_location$state7,_location$state8,_location$state9,_location$state10,_location$state11,_location$state12,_location$state13,_location$state14,_location$state15,_location$state16,_location$state17,_location$state18,_location$state19,_location$state20,_location$state21,_location$state22,_location$state23,_location$state24,_location$state25,_location$state26,_location$state27,_location$state28,_location$state29,_location$state30;var location=_ref5.location;// location.state = {\n//     id: 1,\n//     name: \"Manuel Garros\",\n//     apellido: \"Rojas Suazo\",\n//     run: \"19999999-2\"\n// }\nvar blankMotive={\"id_pre_medical_consultation\":null,\"person_id\":null,\"urgency\":0,\"pain\":0,\"cavities\":0,\"wounds\":0,\"bleeding\":0,\"fracture\":0,\"trauma\":0,\"swelling\":0,\"treatment\":0,\"other\":\"\"};var _useState15=useState(blankMotive),_useState16=_slicedToArray(_useState15,2),consultationMotive=_useState16[0],setConsultationMotive=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),diagsTreats=_useState18[0],setDiagsTreats=_useState18[1];var _useState19=useState(),_useState20=_slicedToArray(_useState19,2),medicalData=_useState20[0],setMedicalData=_useState20[1];var diseases=useList(\"general-anamnesis/disease/\"+(location===null||location===void 0?void 0:(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.id));var _useState21=useState(-1),_useState22=_slicedToArray(_useState21,2),anamnId=_useState22[0],setAnamnId=_useState22[1];var getConsultationMotive=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var _location$state2,_res$data$result2;var res,motive;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return Axios.get(process.env.REACT_APP_API_URL+\"person/pre-medical-consultation/\"+(location===null||location===void 0?void 0:(_location$state2=location.state)===null||_location$state2===void 0?void 0:_location$state2.id));case 2:res=_context5.sent;motive=((_res$data$result2=res.data.result)===null||_res$data$result2===void 0?void 0:_res$data$result2.length)?res.data.result[0]:blankMotive;setConsultationMotive(motive);case 5:case\"end\":return _context5.stop();}}},_callee5);}));return function getConsultationMotive(){return _ref6.apply(this,arguments);};}();var getDiagnosisAndTreatment=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var _location$state3,_res$data$result3;var res;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return Axios.get(process.env.REACT_APP_API_URL+\"geriatrical-odonto-anamnesis/diag-treat/\"+(location===null||location===void 0?void 0:(_location$state3=location.state)===null||_location$state3===void 0?void 0:_location$state3.id));case 2:res=_context6.sent;if((_res$data$result3=res.data.result)===null||_res$data$result3===void 0?void 0:_res$data$result3.length){setDiagsTreats(res.data.result);}case 4:case\"end\":return _context6.stop();}}},_callee6);}));return function getDiagnosisAndTreatment(){return _ref7.apply(this,arguments);};}();var getMedicalData=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(){var _location$state4,_res$data$result4;var res;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return Axios.get(process.env.REACT_APP_API_URL+\"general-anamnesis/data/\"+(location===null||location===void 0?void 0:(_location$state4=location.state)===null||_location$state4===void 0?void 0:_location$state4.id));case 2:res=_context7.sent;if((_res$data$result4=res.data.result)===null||_res$data$result4===void 0?void 0:_res$data$result4.length){setMedicalData(res.data.result[0]);}case 4:case\"end\":return _context7.stop();}}},_callee7);}));return function getMedicalData(){return _ref8.apply(this,arguments);};}();var capitalize=function capitalize(s){if(typeof s!=='string')return'';return s.charAt(0).toUpperCase()+s.slice(1);};var motiveList=function motiveList(){var motives=[];if(consultationMotive.pain)motives.push(\"dolor severo\");if(consultationMotive.cavities)motives.push(\" caries o manchas\");if(consultationMotive.wounds)motives.push(\" lesiones dentales\");if(consultationMotive.bleeding)motives.push(\" sangrado bucal\");if(consultationMotive.fracture)motives.push(\" fractura de prótesis\");if(consultationMotive.trauma)motives.push(\" trauma\");if(consultationMotive.swelling)motives.push(\" hinchazón oral\");if(consultationMotive.treatment)motives.push(\" requiere tratamiento\");return motives?capitalize(String(motives).trim()):\"N/A\";};var fetchLastDental=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var _location$state5;var res;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return getList(\"geriatrical-odonto-anamnesis/crud/\"+(location===null||location===void 0?void 0:(_location$state5=location.state)===null||_location$state5===void 0?void 0:_location$state5.id));case 2:res=_context8.sent;setAnamnId(res.length?res[0].dental_anamnesis_id:-1);case 4:case\"end\":return _context8.stop();}}},_callee8);}));return function fetchLastDental(){return _ref9.apply(this,arguments);};}();useEffect(function(){getConsultationMotive();fetchLastDental();motiveList();getMedicalData();getDiagnosisAndTreatment();},[]);// const reviewByType = type => {\n//     let rt = reviewTypes.filter(rt => rt.name === type);\n//     return rt[0] ? {revs: reviews.filter(r => r.review_type_id === rt[0].id), rtId: rt[0].id} : {revs: [], rtId: -1}\n// }\nreturn/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(\"h2\",null,\"Ficha cl\\xEDnica del paciente\"),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(\"h5\",{className:\"h3 mb-0\"},\"Info. del paciente\")),/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Table,{borderless:true},/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"row\"},\"Nombre\"),/*#__PURE__*/React.createElement(\"td\",null,location===null||location===void 0?void 0:(_location$state6=location.state)===null||_location$state6===void 0?void 0:_location$state6.name))),/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"row\"},\"Apellido(s)\"),/*#__PURE__*/React.createElement(\"td\",null,location===null||location===void 0?void 0:(_location$state7=location.state)===null||_location$state7===void 0?void 0:_location$state7.apellido))),/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"row\"},\"RUN\"),/*#__PURE__*/React.createElement(\"td\",null,location===null||location===void 0?void 0:(_location$state8=location.state)===null||_location$state8===void 0?void 0:_location$state8.run))))))),/*#__PURE__*/React.createElement(Col,{md:\"8\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(\"h5\",{className:\"h3 mb-0\"},\"Alertas m\\xE9dicas\")),/*#__PURE__*/React.createElement(CardBody,null,\"Urgencia dental: \",consultationMotive.urgency?'Sí':'No',/*#__PURE__*/React.createElement(\"br\",null),\"Motivo Consulta: \",motiveList(),/*#__PURE__*/React.createElement(\"br\",null),\"Otros: \",consultationMotive.other)))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(\"h5\",{className:\"h3 mb-0\"},\"Ex\\xE1menes orales 3D\")),/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Button,{id:\"models\",color:\"primary\",disabled:anamnId===-1},anamnId!==-1?/*#__PURE__*/React.createElement(Link,{style:{color:\"white\"},to:{state:{id:location===null||location===void 0?void 0:(_location$state9=location.state)===null||_location$state9===void 0?void 0:_location$state9.id,run:location===null||location===void 0?void 0:(_location$state10=location.state)===null||_location$state10===void 0?void 0:_location$state10.run,name:location===null||location===void 0?void 0:(_location$state11=location.state)===null||_location$state11===void 0?void 0:_location$state11.name,apellido:location===null||location===void 0?void 0:(_location$state12=location.state)===null||_location$state12===void 0?void 0:_location$state12.apellido,anamId:anamnId},pathname:\"/admin/extra-oral\"}},/*#__PURE__*/React.createElement(\"i\",{className:\"ni ni-app\"}),\" Ir a los modelos\"):/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"i\",{className:\"ni ni-app\"}),\" Ir a los modelos\")),anamnId===-1&&/*#__PURE__*/React.createElement(UncontrolledTooltip,{target:\"models\"},\"Se requiere haber registrado la Anamn\\xE9sis Odonto - Geriatra\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"br\",null))))),/*#__PURE__*/React.createElement(Col,{md:\"8\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(\"h5\",{className:\"h3 mb-0\"},\"Links r\\xE1pidos\")),/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Link,{to:{state:{id:location===null||location===void 0?void 0:(_location$state13=location.state)===null||_location$state13===void 0?void 0:_location$state13.id,run:location===null||location===void 0?void 0:(_location$state14=location.state)===null||_location$state14===void 0?void 0:_location$state14.run,name:location===null||location===void 0?void 0:(_location$state15=location.state)===null||_location$state15===void 0?void 0:_location$state15.name,pellido:location===null||location===void 0?void 0:(_location$state16=location.state)===null||_location$state16===void 0?void 0:_location$state16.apellido},pathname:\"/admin/general-anamnesis-u\"}},/*#__PURE__*/React.createElement(\"i\",{className:\"ni ni-bold-right\"}),\"Anamnesis General\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Link,{to:{state:{id:location===null||location===void 0?void 0:(_location$state17=location.state)===null||_location$state17===void 0?void 0:_location$state17.id,run:location===null||location===void 0?void 0:(_location$state18=location.state)===null||_location$state18===void 0?void 0:_location$state18.run,name:location===null||location===void 0?void 0:(_location$state19=location.state)===null||_location$state19===void 0?void 0:_location$state19.name,apellido:location===null||location===void 0?void 0:(_location$state20=location.state)===null||_location$state20===void 0?void 0:_location$state20.apellido},pathname:\"/admin/medical-anamnesis-u\"}},/*#__PURE__*/React.createElement(\"i\",{className:\"ni ni-bold-right\"}),\"Anamnesis M\\xE9dico Geriatra\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Link,{to:{state:{id:location===null||location===void 0?void 0:(_location$state21=location.state)===null||_location$state21===void 0?void 0:_location$state21.id,run:location===null||location===void 0?void 0:(_location$state22=location.state)===null||_location$state22===void 0?void 0:_location$state22.run,name:location===null||location===void 0?void 0:(_location$state23=location.state)===null||_location$state23===void 0?void 0:_location$state23.name,apellido:location===null||location===void 0?void 0:(_location$state24=location.state)===null||_location$state24===void 0?void 0:_location$state24.apellido},pathname:\"/admin/dental-anamnesis-u\"}},/*#__PURE__*/React.createElement(\"i\",{className:\"ni ni-bold-right\"}),\"Anamnesis Odonto Geriatra\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Link,{to:{state:{id:location===null||location===void 0?void 0:(_location$state25=location.state)===null||_location$state25===void 0?void 0:_location$state25.id,run:location===null||location===void 0?void 0:(_location$state26=location.state)===null||_location$state26===void 0?void 0:_location$state26.run,name:location===null||location===void 0?void 0:(_location$state27=location.state)===null||_location$state27===void 0?void 0:_location$state27.name,apellido:location===null||location===void 0?void 0:(_location$state28=location.state)===null||_location$state28===void 0?void 0:_location$state28.apellido},pathname:\"/admin/referral\"}},/*#__PURE__*/React.createElement(\"i\",{className:\"ni ni-bold-right\"}),\"Interconsultas\"))))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(\"h5\",{className:\"h3 mb-0\"},\"Enfermedades\")),/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(\"ul\",null,diseases.map(function(d,i){return/*#__PURE__*/React.createElement(\"li\",{key:i},d.name);}))))),/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(\"h5\",{className:\"h3 mb-0\"},\"Alergias\")),/*#__PURE__*/React.createElement(CardBody,null,medicalData===null||medicalData===void 0?void 0:medicalData.allergies,/*#__PURE__*/React.createElement(\"hr\",null),\"Alergias a f\\xE1rmacos: \",medicalData===null||medicalData===void 0?void 0:medicalData.medicine_allergies))),/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(\"h5\",{className:\"h3 mb-0\"},\"F\\xE1rmacos y Posolog\\xEDa\")),/*#__PURE__*/React.createElement(CardBody,null,medicalData===null||medicalData===void 0?void 0:medicalData.medicine_dose)))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(\"h5\",{className:\"h3 mb-0\"},\"Diagn\\xF3stico odontol\\xF3gico\")),/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(\"ul\",null,diagsTreats.map(function(dT,i){return Boolean(dT.odontological_diag.trim())&&/*#__PURE__*/React.createElement(\"li\",{key:i},dT.odontological_diag);})))))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(\"h5\",{className:\"h3 mb-0\"},\"Plan de tratamiendo\")),/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(\"ul\",null,diagsTreats.map(function(dT,i){return Boolean(dT.treatment_plan.trim())&&/*#__PURE__*/React.createElement(\"li\",{key:i},dT.treatment_plan);})))))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(CardHeader,null,/*#__PURE__*/React.createElement(\"h5\",{className:\"h3 mb-0\"},\"Comentarios\")),/*#__PURE__*/React.createElement(CardBody,null,/*#__PURE__*/React.createElement(Reviews,{id:location===null||location===void 0?void 0:(_location$state29=location.state)===null||_location$state29===void 0?void 0:_location$state29.id,rut:location===null||location===void 0?void 0:(_location$state30=location.state)===null||_location$state30===void 0?void 0:_location$state30.run}))))));};export default ClinicalRecord;","map":{"version":3,"sources":["C:/Users/Christian/Desktop/tele/Nueva carpeta/src/views/pages/patient/clinical-record.js"],"names":["Axios","AuthHelper","getList","useList","React","useEffect","useState","Link","Button","Col","Container","Form","FormGroup","Input","Row","InputGroup","InputGroupText","InputGroupAddon","Card","CardBody","Table","UncontrolledTooltip","UncontrolledPopover","PopoverBody","CardHeader","Label","FileView","props","fileInfo","setFileInfo","fileById","openFile","url","win","window","open","process","env","REACT_APP_API_URL","focus","get","id","res","data","result","length","name","Reviews","revText","setRevText","file","setFile","reviewTypes","reviews","setReviews","selectedFilter","setSelectedFilter","rtId","setRtId","fileWillPost","setFileWillPost","fetchReviews","rut","handleFileChange","e","target","files","resetFile","postReview","preventDefault","withFile","noFile","post","personId","userId","getUserId","reviewTypeId","description","error","fileName","f","FormData","append","then","response","console","log","catch","reviewType","rTypeId","rt","filter","filterRevs","rev","String","review_type_id","value","map","overflow","height","review_id","c_time","c_date","c_year","names","Boolean","has_file","document","getElementById","click","visibility","ClinicalRecord","location","blankMotive","consultationMotive","setConsultationMotive","diagsTreats","setDiagsTreats","medicalData","setMedicalData","diseases","state","anamnId","setAnamnId","getConsultationMotive","motive","getDiagnosisAndTreatment","getMedicalData","capitalize","s","charAt","toUpperCase","slice","motiveList","motives","pain","push","cavities","wounds","bleeding","fracture","trauma","swelling","treatment","trim","fetchLastDental","dental_anamnesis_id","apellido","run","urgency","other","color","anamId","pathname","pellido","d","i","allergies","medicine_allergies","medicine_dose","dT","odontological_diag","treatment_plan"],"mappings":"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","sourcesContent":["import Axios from '../../../helpers/axiosConfig';\r\nimport AuthHelper from 'helpers/AuthHelper';\r\nimport {getList} from 'helpers/ListHelper';\r\nimport useList from 'hooks/useList';\r\nimport React, {useEffect, useState} from 'react'\r\nimport {Link} from 'react-router-dom'\r\nimport {\r\n    Button, Col, Container, Form, FormGroup, Input, Row, InputGroup,\r\n    InputGroupText, InputGroupAddon, Card, CardBody, Table,\r\n    UncontrolledTooltip, UncontrolledPopover, PopoverBody,\r\n    CardHeader\r\n} from 'reactstrap'\r\nimport Label from 'reactstrap/lib/Label';\r\n\r\nconst FileView = props => {\r\n    const [fileInfo, setFileInfo] = useState();\r\n\r\n    useEffect(() => {\r\n        fileById()\r\n    }, [])\r\n\r\n    const openFile = url => {\r\n        var win = window.open(process.env.REACT_APP_API_URL + \"static/\" + url, '_blank');\r\n        win.focus();\r\n    }\r\n\r\n    const fileById = async () => {\r\n        const res = await Axios.get(\"review/file/\" + props.id);\r\n        if (res.data.result?.length) {\r\n            setFileInfo(res.data.result[0])\r\n        }\r\n    }\r\n    return <div>{fileInfo && <Button outline color=\"info\" onClick={() => {\r\n        openFile(fileInfo.url)\r\n    }}>{fileInfo.name}</Button>}</div>\r\n}\r\n\r\nconst Reviews = props => {\r\n    const [revText, setRevText] = useState(\"\");\r\n    const [file, setFile] = useState(null);\r\n    const reviewTypes = useList('review/types');\r\n    const [reviews, setReviews] = useState([]);\r\n    const [selectedFilter, setSelectedFilter] = useState(\"-1\");\r\n    const [rtId, setRtId] = useState(-1);\r\n    const [fileWillPost, setFileWillPost] = useState(false);\r\n\r\n    useEffect(() => {\r\n        fetchReviews()\r\n    }, [])\r\n\r\n    const rut = props.rut\r\n\r\n    const fetchReviews = async () => {\r\n        const res = await getList(\"review/get/\" + props.id);\r\n        setReviews(res);\r\n    };\r\n\r\n    const handleFileChange = e => {\r\n        setFile(e.target.files[0])\r\n    }\r\n\r\n    const resetFile = () => {\r\n        setFile(null);\r\n    }\r\n\r\n    const postReview = (e) => {\r\n        e.preventDefault();\r\n        if (fileWillPost && file) {\r\n            withFile()\r\n        } else {\r\n            noFile()\r\n        }\r\n    }\r\n\r\n    const noFile = async () => {\r\n        const res = await Axios.post(\"review\", {\r\n            personId: props.id,/* Id del paciente en atención */\r\n            userId: AuthHelper.getUserId(),/* Id del usuario en sesión */\r\n            reviewTypeId: rtId,\r\n            description: revText\r\n        });\r\n        if (!res.data.error) {\r\n            fetchReviews();\r\n            setRevText(\"\");\r\n        }\r\n    }\r\n\r\n    const withFile = async () => {\r\n        const res = await Axios.post(\"review/file/\", {\r\n            personId: props.id,/* Id del paciente en atención */\r\n            userId: AuthHelper.getUserId(),/* Id del usuario en sesión */\r\n            reviewTypeId: rtId,\r\n            description: revText,\r\n            url: rut + \"/\" + file.name,\r\n            fileName: file.name\r\n        });\r\n        if (!res.data.error) {\r\n            const f = new FormData();\r\n            f.append(\"file\", file, file.name)\r\n            await Axios.post(\"file/review/\" + rut, f)\r\n                .then(response => {\r\n                    console.log(response)\r\n                    resetFile();\r\n                    setFileWillPost(false);\r\n                }).catch(error => {\r\n                console.log(error)\r\n            })\r\n            fetchReviews();\r\n            setRevText(\"\");\r\n        }\r\n    }\r\n\r\n    const reviewType = rTypeId => {\r\n        let rt = reviewTypes.filter(rt => rt.id === rTypeId);\r\n        return rt[0]?.name\r\n    }\r\n\r\n    const filterRevs = () => {\r\n        return selectedFilter === \"-1\" ? reviews : reviews.filter(rev => String(rev.review_type_id) === selectedFilter)\r\n    }\r\n\r\n    return ((!reviewTypes) ? <div></div> :\r\n        <div>\r\n            <strong>Filtros:{\"  \"}</strong>\r\n            <FormGroup check inline>\r\n                <Label check>\r\n                    <input type=\"radio\" value=\"-1\" checked={selectedFilter === \"-1\"}\r\n                                onChange={e => setSelectedFilter(e.target.value)}/> Todos\r\n                </Label>\r\n            </FormGroup>\r\n            {reviewTypes.map(rt => (\r\n            <FormGroup check inline key={rt.id}>\r\n                <Label check>\r\n                    <input type=\"radio\" value={rt.id} checked={selectedFilter == rt.id}\r\n                            onChange={e => setSelectedFilter(e.target.value)}/> {rt.name}\r\n                </Label>\r\n            </FormGroup>\r\n            ))}\r\n            <hr/>\r\n            <div\r\n                className=\"timeline timeline-one-side\"\r\n                data-timeline-axis-style=\"none\"\r\n                data-timeline-content=\"axis\"\r\n                style={{overflow: 'scroll', height: '450px'}}\r\n            >\r\n                {filterRevs().map(rev =>\r\n                    <div key={rev.review_id} className=\"timeline-block\">\r\n            <span className=\"timeline-step\">\r\n                <small className=\"text-muted font-weight-bold\" id=\"rev_date\">\r\n                    {rev.c_time}<br/>{rev.c_date}\r\n                </small>\r\n                <UncontrolledTooltip target=\"rev_date\">\r\n                    {rev.c_date}/{rev.c_year}\r\n                </UncontrolledTooltip>\r\n            </span>\r\n                        <div className=\"timeline-content\">\r\n                            <h5 className=\"mt-2 mb-0\">{rev.names} en {reviewType(rev.review_type_id)}</h5>\r\n                            <p className=\"text-sm mt-1 mb-0\">\r\n                                {rev.description}\r\n                            </p>\r\n                            {Boolean(rev.has_file) && <FileView id={rev.review_id}/>}\r\n                        </div>\r\n                    </div>)}\r\n            </div>\r\n            <Form onSubmit={postReview}>\r\n                {rtId == 4 && <div><br/>\r\n                    Revise la plantilla principal de recetas <a target=\"_blank\" without rel=\"noopener noreferrer\" href=\"https://drive.google.com/drive/u/4/folders/1QyKDDUkRrbq4DIaseKIuaoba9XraAA96\">aquí</a>\r\n                </div>}\r\n                <br/>\r\n                <FormGroup className=\"row\">\r\n                    <Label className=\"form-control-label pt-3\" md=\"2\"><b>Tipo de comentario</b></Label>\r\n                    <Col md=\"10\">\r\n                        <Input type=\"select\" onChange={e => {\r\n                            setRtId(e.target.value)\r\n                        }} required>\r\n                            <option hidden value={-1}>(Seleccione)</option>\r\n                            {reviewTypes.map(rt =>\r\n                                <option key={rt.id} value={rt.id}>{rt.name}</option>\r\n                            )}\r\n                        </Input>\r\n                    </Col>\r\n                </FormGroup>\r\n                <FormGroup className=\"row\">\r\n                    <Label md=\"3\">Adjuntar archivo?{\" \"}\r\n                    <label className=\"custom-toggle custom-toggle-info mr-1\">\r\n                        <Input type=\"checkbox\" checked={fileWillPost} onChange={() => {\r\n                            setFileWillPost(!fileWillPost)\r\n                        }}/>\r\n                        <span\r\n                            className=\"custom-toggle-slider rounded-circle\" data-label-off=\"No\" data-label-on=\"Sí\"\r\n                        />\r\n                    </label></Label>\r\n                    <Col md=\"9\">\r\n                    {fileWillPost &&\r\n                    <InputGroup>\r\n                        <Input\r\n                            autoComplete=\"off\"\r\n                            type=\"text\"\r\n                            name=\"treatment_plan\"\r\n                            readOnly\r\n                            placeholder=\"Elija archivo\"\r\n                            value={file ? file.name : \"\"}\r\n                        />\r\n                        <InputGroupAddon addonType=\"append\">\r\n                            {file ?  <Button \r\n                                type=\"button\" color=\"danger\" \r\n                                onClick={resetFile}>\r\n                                Deshacer\r\n                            </Button>:\r\n                            <Button \r\n                                type=\"button\" color=\"info\" \r\n                                onClick={() => {document.getElementById('rFile').click()}}>\r\n                                Elegir archivo\r\n                            </Button>}\r\n                        </InputGroupAddon>\r\n                    </InputGroup>}\r\n                    <input \r\n                        type=\"file\" \r\n                        id=\"rFile\" \r\n                        style={{visibility: 'hidden'}} \r\n                        onChange={handleFileChange}\r\n                        required={fileWillPost}\r\n                    />\r\n                    </Col>\r\n                </FormGroup>\r\n                <InputGroup>\r\n                    <Input type=\"textarea\" value={revText} onChange={e => {\r\n                        setRevText(e.target.value)\r\n                    }} placeholder=\"Escriba aquí su comentario\" required={!fileWillPost}/>\r\n                    <Button color=\"primary\" disabled={rtId == -1} type=\"submit\">Subir</Button>\r\n                </InputGroup>\r\n            </Form>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst ClinicalRecord = ({location}) => {\r\n\r\n    // location.state = {\r\n    //     id: 1,\r\n    //     name: \"Manuel Garros\",\r\n    //     apellido: \"Rojas Suazo\",\r\n    //     run: \"19999999-2\"\r\n    // }\r\n\r\n    const blankMotive = {\r\n        \"id_pre_medical_consultation\": null,\r\n        \"person_id\": null,\r\n        \"urgency\": 0,\r\n        \"pain\": 0,\r\n        \"cavities\": 0,\r\n        \"wounds\": 0,\r\n        \"bleeding\": 0,\r\n        \"fracture\": 0,\r\n        \"trauma\": 0,\r\n        \"swelling\": 0,\r\n        \"treatment\": 0,\r\n        \"other\": \"\"\r\n    }\r\n\r\n    const [consultationMotive, setConsultationMotive] = useState(blankMotive);\r\n    const [diagsTreats, setDiagsTreats] = useState([]);\r\n    const [medicalData, setMedicalData] = useState();\r\n    const diseases = useList(\"general-anamnesis/disease/\" + location?.state?.id)\r\n    const [anamnId, setAnamnId] = useState(-1);\r\n\r\n\r\n    const getConsultationMotive = async () => {\r\n        const res = await Axios.get(process.env.REACT_APP_API_URL + \"person/pre-medical-consultation/\" + location?.state?.id);\r\n        let motive = res.data.result?.length ? res.data.result[0] : blankMotive\r\n        setConsultationMotive(motive);\r\n    }\r\n\r\n    const getDiagnosisAndTreatment = async () => {\r\n        const res = await Axios.get(process.env.REACT_APP_API_URL + \"geriatrical-odonto-anamnesis/diag-treat/\" + location?.state?.id);\r\n        if (res.data.result?.length) {\r\n            setDiagsTreats(res.data.result)\r\n        }\r\n    }\r\n\r\n    const getMedicalData = async () => {\r\n        const res = await Axios.get(process.env.REACT_APP_API_URL + \"general-anamnesis/data/\" + location?.state?.id);\r\n        if (res.data.result?.length) {\r\n            setMedicalData(res.data.result[0])\r\n        }\r\n    }\r\n\r\n    const capitalize = (s) => {\r\n        if (typeof s !== 'string') return ''\r\n        return s.charAt(0).toUpperCase() + s.slice(1)\r\n    }\r\n\r\n    const motiveList = () => {\r\n        let motives = []\r\n        if (consultationMotive.pain) motives.push(\"dolor severo\")\r\n        if (consultationMotive.cavities) motives.push(\" caries o manchas\")\r\n        if (consultationMotive.wounds) motives.push(\" lesiones dentales\")\r\n        if (consultationMotive.bleeding) motives.push(\" sangrado bucal\")\r\n        if (consultationMotive.fracture) motives.push(\" fractura de prótesis\")\r\n        if (consultationMotive.trauma) motives.push(\" trauma\")\r\n        if (consultationMotive.swelling) motives.push(\" hinchazón oral\")\r\n        if (consultationMotive.treatment) motives.push(\" requiere tratamiento\")\r\n        return motives ? capitalize(String(motives).trim()) : \"N/A\"\r\n    }\r\n\r\n    const fetchLastDental = async () => {\r\n        const res = await getList(\"geriatrical-odonto-anamnesis/crud/\" + location?.state?.id);\r\n        setAnamnId((res.length) ? res[0].dental_anamnesis_id : -1)      \r\n    };  \r\n\r\n    useEffect(() => {\r\n        getConsultationMotive();\r\n        fetchLastDental();\r\n        motiveList();\r\n        getMedicalData();\r\n        getDiagnosisAndTreatment();\r\n    }, [])\r\n\r\n    // const reviewByType = type => {\r\n    //     let rt = reviewTypes.filter(rt => rt.name === type);\r\n    //     return rt[0] ? {revs: reviews.filter(r => r.review_type_id === rt[0].id), rtId: rt[0].id} : {revs: [], rtId: -1}\r\n    // }\r\n\r\n\r\n\r\n    return (\r\n        <Container>\r\n            <h2>\r\n                Ficha clínica del paciente\r\n            </h2>\r\n            <Row>\r\n                <Col md=\"4\">\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <h5 className=\"h3 mb-0\">Info. del paciente</h5>\r\n                        </CardHeader>\r\n                        <CardBody>\r\n                            <Table borderless>\r\n                                <tbody>\r\n                                <tr>\r\n                                    <th scope=\"row\">Nombre</th>\r\n                                    <td>{location?.state?.name}</td>\r\n                                </tr>\r\n                                </tbody>\r\n                                <tbody>\r\n                                <tr>\r\n                                    <th scope=\"row\">Apellido(s)</th>\r\n                                    <td>{location?.state?.apellido}</td>\r\n                                </tr>\r\n                                </tbody>\r\n                                <tbody>\r\n                                <tr>\r\n                                    <th scope=\"row\">RUN</th>\r\n                                    <td>{location?.state?.run}</td>\r\n                                </tr>\r\n                                </tbody>\r\n                            </Table>\r\n                        </CardBody>\r\n                    </Card>\r\n                </Col>\r\n                <Col md=\"8\">\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <h5 className=\"h3 mb-0\">Alertas médicas</h5>\r\n                        </CardHeader>\r\n                        <CardBody>\r\n                            Urgencia dental: {consultationMotive.urgency ? 'Sí' : 'No'}<br/>\r\n                            Motivo Consulta: {motiveList()}<br/>\r\n                            Otros: {consultationMotive.other}\r\n                        </CardBody>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n                <Col md=\"4\">\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <h5 className=\"h3 mb-0\">Exámenes orales 3D</h5>\r\n                        </CardHeader>\r\n                        <CardBody>\r\n                            <Button id=\"models\" color=\"primary\" disabled={anamnId===-1}>\r\n                                {anamnId!==-1 ? <Link style={{color: \"white\"}} to={{\r\n                                    state: {\r\n                                        id: location?.state?.id,\r\n                                        run: location?.state?.run,\r\n                                        name: location?.state?.name,\r\n                                        apellido: location?.state?.apellido,\r\n                                        anamId: anamnId\r\n                                    },\r\n                                    pathname: \"/admin/extra-oral\"\r\n                                    }}>\r\n                                    <i className=\"ni ni-app\"></i> Ir a los modelos\r\n                                </Link>: <span><i className=\"ni ni-app\"></i> Ir a los modelos</span>}\r\n                            </Button>\r\n                            {anamnId===-1 && <UncontrolledTooltip target=\"models\">\r\n                                Se requiere haber registrado la Anamnésis Odonto - Geriatra\r\n                            </UncontrolledTooltip>}\r\n                            <div><br/></div>\r\n                            \r\n                        </CardBody>\r\n                    </Card>\r\n                </Col>\r\n                <Col md=\"8\">\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <h5 className=\"h3 mb-0\">Links rápidos</h5>\r\n                        </CardHeader>\r\n                        <CardBody>\r\n                            <Link to={{\r\n                                state: {\r\n                                    id: location?.state?.id,\r\n                                    run: location?.state?.run,\r\n                                    name: location?.state?.name,\r\n                                    pellido: location?.state?.apellido\r\n                                },\r\n                                pathname: \"/admin/general-anamnesis-u\"\r\n                            }}>\r\n                                <i className=\"ni ni-bold-right\"></i>Anamnesis General\r\n                            </Link><br/>\r\n                            <Link to={{\r\n                                state: {\r\n                                    id: location?.state?.id,\r\n                                    run: location?.state?.run,\r\n                                    name: location?.state?.name,\r\n                                    apellido: location?.state?.apellido\r\n                                },\r\n                                pathname: \"/admin/medical-anamnesis-u\"\r\n                            }}>\r\n                                <i className=\"ni ni-bold-right\"></i>Anamnesis Médico Geriatra\r\n                            </Link><br/>\r\n                            <Link to={{\r\n                                state: {\r\n                                    id: location?.state?.id,\r\n                                    run: location?.state?.run,\r\n                                    name: location?.state?.name,\r\n                                    apellido: location?.state?.apellido\r\n                                },\r\n                                pathname: \"/admin/dental-anamnesis-u\"\r\n                            }}>\r\n                                <i className=\"ni ni-bold-right\"></i>Anamnesis Odonto Geriatra\r\n                            </Link><br/>\r\n                            <Link to={{\r\n                                state: {\r\n                                    id: location?.state?.id,\r\n                                    run: location?.state?.run,\r\n                                    name: location?.state?.name,\r\n                                    apellido: location?.state?.apellido\r\n                                },\r\n                                pathname: \"/admin/referral\"\r\n                            }}>\r\n                                <i className=\"ni ni-bold-right\"></i>Interconsultas\r\n                            </Link>\r\n                        </CardBody>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n                <Col md=\"4\"><Card>\r\n                    <CardHeader>\r\n                        <h5 className=\"h3 mb-0\">Enfermedades</h5>\r\n                    </CardHeader>\r\n                    <CardBody>\r\n                        <ul>\r\n                        {diseases.map((d, i) => \r\n                            <li key={i}>{d.name}</li>\r\n                        )}\r\n                        </ul>\r\n                    </CardBody>\r\n                </Card></Col>\r\n                <Col md=\"4\"><Card>\r\n                    <CardHeader>\r\n                        <h5 className=\"h3 mb-0\">Alergias</h5>\r\n                    </CardHeader>\r\n                    <CardBody>\r\n                        {medicalData?.allergies}<hr/>\r\n                        Alergias a fármacos: {medicalData?.medicine_allergies}\r\n                    </CardBody>\r\n                </Card></Col>\r\n                <Col md=\"4\"><Card>\r\n                    <CardHeader>\r\n                        <h5 className=\"h3 mb-0\">Fármacos y Posología</h5>\r\n                    </CardHeader>\r\n                    <CardBody>\r\n                        {medicalData?.medicine_dose}\r\n                    </CardBody>\r\n                </Card></Col>\r\n            </Row>\r\n            <Row>\r\n                <Col><Card>\r\n                    <CardHeader>\r\n                        <h5 className=\"h3 mb-0\">Diagnóstico odontológico</h5>\r\n                    </CardHeader>\r\n                    <CardBody>\r\n                        <ul>\r\n                        {diagsTreats.map((dT, i) => \r\n                            Boolean(dT.odontological_diag.trim()) && <li key={i}>{dT.odontological_diag}</li>\r\n                        )}\r\n                        </ul>\r\n                    </CardBody>\r\n                </Card></Col>\r\n            </Row>\r\n            <Row>\r\n                <Col><Card>\r\n                    <CardHeader>\r\n                        <h5 className=\"h3 mb-0\">Plan de tratamiendo</h5>\r\n                    </CardHeader>\r\n                    <CardBody>\r\n                        <ul>\r\n                        {diagsTreats.map((dT, i) => \r\n                            Boolean(dT.treatment_plan.trim()) && <li key={i}>{dT.treatment_plan}</li>\r\n                        )}\r\n                        </ul>\r\n                    </CardBody>\r\n                </Card></Col>\r\n            </Row>\r\n            <Row>\r\n                <Col><Card>\r\n                    <CardHeader>\r\n                        <h5 className=\"h3 mb-0\">Comentarios</h5>\r\n                    </CardHeader>\r\n                    <CardBody>\r\n                        <Reviews id={location?.state?.id} rut={location?.state?.run}/>\r\n                    </CardBody>\r\n                </Card></Col>\r\n            </Row>\r\n        </Container>\r\n    );\r\n}\r\n\r\nexport default ClinicalRecord\r\n"]},"metadata":{},"sourceType":"module"}